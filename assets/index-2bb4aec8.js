var Dn=Object.defineProperty;var An=(r,e,t)=>e in r?Dn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var A=(r,e,t)=>(An(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function C(){}const En=r=>r;function Fn(r,e){for(const t in e)r[t]=e[t];return r}function xn(r){return r&&typeof r=="object"&&typeof r.then=="function"}function Rr(r){return r()}function Gt(){return Object.create(null)}function ke(r){r.forEach(Rr)}function et(r){return typeof r=="function"}function ae(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let nt;function De(r,e){return nt||(nt=document.createElement("a")),nt.href=e,r===nt.href}function Sn(r){return Object.keys(r).length===0}function Nr(r,...e){if(r==null)return C;const t=r.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function jr(r){let e;return Nr(r,t=>e=t)(),e}function Y(r,e,t){r.$$.on_destroy.push(Nr(e,t))}function Ir(r,e,t,n){if(r){const i=zr(r,e,t,n);return r[0](i)}}function zr(r,e,t,n){return r[1]&&n?Fn(t.ctx.slice(),r[1](n(e))):t.ctx}function Cr(r,e,t,n){if(r[2]&&n){const i=r[2](n(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function $r(r,e,t,n,i,o){if(i){const s=zr(e,t,n,o);r.p(s,i)}}function Mr(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}const Tr=typeof window<"u";let kn=Tr?()=>window.performance.now():()=>Date.now(),Ct=Tr?r=>requestAnimationFrame(r):C;const Me=new Set;function Vr(r){Me.forEach(e=>{e.c(r)||(Me.delete(e),e.f())}),Me.size!==0&&Ct(Vr)}function On(r){let e;return Me.size===0&&Ct(Vr),{promise:new Promise(t=>{Me.add(e={c:r,f:t})}),abort(){Me.delete(e)}}}function D(r,e){r.appendChild(e)}function Wr(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function Pn(r){const e=E("style");return Rn(Wr(r),e),e.sheet}function Rn(r,e){return D(r.head||r,e),e.sheet}function P(r,e,t){r.insertBefore(e,t||null)}function k(r){r.parentNode&&r.parentNode.removeChild(r)}function Nn(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function E(r){return document.createElement(r)}function B(r){return document.createTextNode(r)}function j(){return B(" ")}function ht(){return B("")}function V(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function g(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function jn(r){return Array.from(r.childNodes)}function Ae(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function ee(r,e,t,n){t===null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}function Se(r,e,t){r.classList[t?"add":"remove"](e)}function Ht(r,e){return new r(e)}const lt=new Map;let ut=0;function In(r){let e=5381,t=r.length;for(;t--;)e=(e<<5)-e^r.charCodeAt(t);return e>>>0}function zn(r,e){const t={stylesheet:Pn(e),rules:{}};return lt.set(r,t),t}function Cn(r,e,t,n,i,o,s,a=0){const u=16.666/n;let l=`{
`;for(let _=0;_<=1;_+=u){const w=e+(t-e)*o(_);l+=_*100+`%{${s(w,1-w)}}
`}const c=l+`100% {${s(t,1-t)}}
}`,d=`__svelte_${In(c)}_${a}`,h=Wr(r),{stylesheet:f,rules:m}=lt.get(h)||zn(h,r);m[d]||(m[d]=!0,f.insertRule(`@keyframes ${d} ${c}`,f.cssRules.length));const y=r.style.animation||"";return r.style.animation=`${y?`${y}, `:""}${d} ${n}ms linear ${i}ms 1 both`,ut+=1,d}function $n(r,e){const t=(r.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(r.style.animation=n.join(", "),ut-=i,ut||Mn())}function Mn(){Ct(()=>{ut||(lt.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&k(e)}),lt.clear())})}function Tn(r,e,t,n){if(!e)return C;const i=r.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return C;const{delay:o=0,duration:s=300,easing:a=En,start:u=kn()+o,end:l=u+s,tick:c=C,css:d}=t(r,{from:e,to:i},n);let h=!0,f=!1,m;function y(){d&&(m=Cn(r,0,1,s,o,a,d)),o||(f=!0)}function _(){d&&$n(r,m),h=!1}return On(w=>{if(!f&&w>=u&&(f=!0),f&&w>=l&&(c(1,0),_()),!h)return!1;if(f){const v=w-u,p=0+1*a(v/s);c(p,1-p)}return!0}),y(),c(0,1),_}function Vn(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:n}=e,i=r.getBoundingClientRect();r.style.position="absolute",r.style.width=t,r.style.height=n,Wn(r,i)}}function Wn(r,e){const t=r.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const n=getComputedStyle(r),i=n.transform==="none"?"":n.transform;r.style.transform=`${i} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Ke;function _e(r){Ke=r}function Zr(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Lr(r){Zr().$$.on_mount.push(r)}const Ye=[],Ge=[],st=[],Qt=[],Zn=Promise.resolve();let St=!1;function Ln(){St||(St=!0,Zn.then($t))}function kt(r){st.push(r)}const Dt=new Set;let it=0;function $t(){const r=Ke;do{for(;it<Ye.length;){const e=Ye[it];it++,_e(e),qn(e.$$)}for(_e(null),Ye.length=0,it=0;Ge.length;)Ge.pop()();for(let e=0;e<st.length;e+=1){const t=st[e];Dt.has(t)||(Dt.add(t),t())}st.length=0}while(Ye.length);for(;Qt.length;)Qt.pop()();St=!1,Dt.clear(),_e(r)}function qn(r){if(r.fragment!==null){r.update(),ke(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(kt)}}const at=new Set;let Ne;function pt(){Ne={r:0,c:[],p:Ne}}function mt(){Ne.r||ke(Ne.c),Ne=Ne.p}function Z(r,e){r&&r.i&&(at.delete(r),r.i(e))}function q(r,e,t,n){if(r&&r.o){if(at.has(r))return;at.add(r),Ne.c.push(()=>{at.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function er(r,e){const t=e.token={};function n(i,o,s,a){if(e.token!==t)return;e.resolved=a;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=a);const l=i&&(e.current=i)(u);let c=!1;e.block&&(e.blocks?e.blocks.forEach((d,h)=>{h!==o&&d&&(pt(),q(d,1,1,()=>{e.blocks[h]===d&&(e.blocks[h]=null)}),mt())}):e.block.d(1),l.c(),Z(l,1),l.m(e.mount(),e.anchor),c=!0),e.block=l,e.blocks&&(e.blocks[o]=l),c&&$t()}if(xn(r)){const i=Zr();if(r.then(o=>{_e(i),n(e.then,1,e.value,o),_e(null)},o=>{if(_e(i),n(e.catch,2,e.error,o),_e(null),!e.hasCatch)throw o}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,r),!0;e.resolved=r}}function Bn(r,e,t){const n=e.slice(),{resolved:i}=r;r.current===r.then&&(n[r.value]=i),r.current===r.catch&&(n[r.error]=i),r.block.p(n,t)}function qr(r,e){r.d(1),e.delete(r.key)}function Un(r,e){q(r,1,1,()=>{e.delete(r.key)})}function Yn(r,e){r.f(),qr(r,e)}function Mt(r,e,t,n,i,o,s,a,u,l,c,d){let h=r.length,f=o.length,m=h;const y={};for(;m--;)y[r[m].key]=m;const _=[],w=new Map,v=new Map;for(m=f;m--;){const x=d(i,o,m),F=t(x);let b=s.get(F);b?n&&b.p(x,e):(b=l(F,x),b.c()),w.set(F,_[m]=b),F in y&&v.set(F,Math.abs(m-y[F]))}const p=new Set,S=new Set;function N(x){Z(x,1),x.m(a,c),s.set(x.key,x),c=x.first,f--}for(;h&&f;){const x=_[f-1],F=r[h-1],b=x.key,O=F.key;x===F?(c=x.first,h--,f--):w.has(O)?!s.has(b)||p.has(b)?N(x):S.has(O)?h--:v.get(b)>v.get(O)?(S.add(b),N(x)):(p.add(O),h--):(u(F,s),h--)}for(;h--;){const x=r[h];w.has(x.key)||u(x,s)}for(;f;)N(_[f-1]);return _}function le(r){r&&r.c()}function oe(r,e,t,n){const{fragment:i,after_update:o}=r.$$;i&&i.m(e,t),n||kt(()=>{const s=r.$$.on_mount.map(Rr).filter(et);r.$$.on_destroy?r.$$.on_destroy.push(...s):ke(s),r.$$.on_mount=[]}),o.forEach(kt)}function se(r,e){const t=r.$$;t.fragment!==null&&(ke(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Jn(r,e){r.$$.dirty[0]===-1&&(Ye.push(r),Ln(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function ce(r,e,t,n,i,o,s,a=[-1]){const u=Ke;_e(r);const l=r.$$={fragment:null,ctx:[],props:o,update:C,not_equal:i,bound:Gt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Gt(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,h,...f)=>{const m=f.length?f[0]:h;return l.ctx&&i(l.ctx[d],l.ctx[d]=m)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](m),c&&Jn(r,d)),h}):[],l.update(),c=!0,ke(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){const d=jn(e.target);l.fragment&&l.fragment.l(d),d.forEach(k)}else l.fragment&&l.fragment.c();e.intro&&Z(r.$$.fragment),oe(r,e.target,e.anchor,e.customElement),$t()}_e(u)}class fe{$destroy(){se(this,1),this.$destroy=C}$on(e,t){if(!et(t))return C;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Sn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ze=[];function Br(r,e=C){let t;const n=new Set;function i(a){if(ae(r,a)&&(r=a,t)){const u=!ze.length;for(const l of n)l[1](),ze.push(l,r);if(u){for(let l=0;l<ze.length;l+=2)ze[l][0](ze[l+1]);ze.length=0}}}function o(a){i(a(r))}function s(a,u=C){const l=[a,u];return n.add(l),n.size===1&&(t=e(i)||C),a(r),()=>{n.delete(l),n.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function Xn(){return{close:!0,minimize:!0,maximize:!1}}function re(r=void 0){let e=Br(r),t={cachedValue:void 0,set(n){t.cachedValue=n,e.set(n)},subscribe:e.subscribe,update(n){let i=n(t.cachedValue);t.cachedValue=i,e.set(i)},get:()=>t.cachedValue};return t}class Kn{constructor(e,t,n,i){A(this,"stores");this.stores=new Gn(e,t,n,i)}get x(){return this.stores.x.get()}set x(e){this.stores.x.set(e)}get y(){return this.stores.y.get()}set y(e){this.stores.y.set(e)}get zIndex(){return this.stores.zIndex.get()}set zIndex(e){this.stores.zIndex.set(e)}get width(){return this.stores.width.get()}set width(e){this.stores.width.set(e)}get height(){return this.stores.height.get()}set height(e){this.stores.height.set(e)}get title(){return this.stores.title.get()}set title(e){this.stores.title.set(e)}get classes(){return this.stores.classes.get()}set classes(e){this.stores.classes.set(e)}get style(){return this.stores.style.get()}set style(e){this.stores.style.set(e)}get resizable(){return this.stores.resizable.get()}set resizable(e){this.stores.resizable.set(e)}get important(){return this.stores.important.get()}set important(e){this.stores.important.set(e)}get isVisible(){return this.stores.isVisible.get()}set isVisible(e){this.stores.isVisible.set(e)}get icon(){return this.stores.icon.get()}set icon(e){this.stores.icon.set(e)}get controlButtons(){return this.stores.controlButtons.get()}set controlButtons(e){this.stores.controlButtons.set(e)}}class Gn{constructor(e,t,n,i){A(this,"classes",re(""));A(this,"style",re(""));A(this,"title",re());A(this,"icon",re());A(this,"resizable",re(!1));A(this,"important",re(!1));A(this,"isVisible",re(!0));A(this,"controlButtons",re(Xn()));A(this,"height");A(this,"width");A(this,"x");A(this,"y");A(this,"zIndex",re(0));this.x=re(e),this.y=re(t),this.width=re(n),this.height=re(i)}}class Le{constructor(e,t=void 0){A(this,"window");A(this,"listeners",[]);A(this,"listen",e=>(this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!=e)}));A(this,"trigger",(e=void 0)=>{this.listeners.forEach(t=>{t(this.window,e??this.defaultOptions)})});this.defaultOptions=t,this.window=e}}const he=class extends Kn{constructor(t,n,i,o,s){super(t,n,i,o);A(this,"_process");A(this,"windowElement");A(this,"onPopInEnd",t=>{let n=this.windowElement,i=o=>{o.animationName=="pop-in"&&(n.removeEventListener("animationend",i),t(),n.style.animationDirection="normal")};this.windowElement.addEventListener("animationend",i)});A(this,"playCloseAnimation",()=>{this.windowElement.classList.remove("window-spawn"),this.windowElement.style.animationDirection="reverse",this.windowElement.offsetWidth,this.windowElement.classList.add("window-spawn")});A(this,"kill",()=>{this.closeEvent.trigger();let t=he.windows.filter(n=>n!=this);he.windowsStore.set(t),this.process.getWindows().length==0&&this.process.kill()});A(this,"dragStart",new Le(this));A(this,"dragStop",new Le(this));A(this,"onFocus",new Le(this));A(this,"onUnfocus",new Le(this));A(this,"closeEvent",new Le(this));this.component=s}static get activeWindow(){return this.activeWindowStore.get()}static set activeWindow(t){var n,i;t!=this.activeWindow&&((i=(n=this.activeWindow)==null?void 0:n.onUnfocus)==null||i.trigger()),t!=null&&(t.process.lastActiveWindow=t,t.onFocus.trigger()),this.activeWindowStore.set(t)}static getWindows(){return[...this.windows]}get process(){return this._process}get isAlive(){return this._process!=null}get isActive(){return he.activeWindow==this}get isVisible(){return jr(this.stores.isVisible)}set isVisible(t){t==!1?(this.playCloseAnimation(),this.onPopInEnd(()=>{this.stores.isVisible.set(!1),he.activeWindow==this&&(he.activeWindow=void 0)})):this.stores.isVisible.set(!0)}hide(){this.isVisible=!1}unhide(){this.isVisible=!0}close(){this.playCloseAnimation(),this.onPopInEnd(this.kill)}};let T=he;A(T,"windowsStore",re([])),A(T,"windows"),A(T,"activeWindowStore",re(void 0)),A(T,"spawn",(t,n)=>(he.windowsStore.set([...he.windows,t]),t._process=n,t.title==null&&(t.title=t.process.app.name),t)),(()=>{he.windowsStore.subscribe(t=>{he.windows=t})})();let Ur=0;const Je=()=>Ur++,tr=()=>Ur;function rr(r){let e;return{c(){e=E("div"),ee(e,"height",r[2]+"px"),ee(e,"width",r[5]+"px"),g(e,"class","absolute")},m(t,n){P(t,e,n)},p(t,n){n&4&&ee(e,"height",t[2]+"px"),n&32&&ee(e,"width",t[5]+"px")},d(t){t&&k(e)}}}function Hn(r){let e,t,n,i,o,s=r[1]&&rr(r);var a=r[0].component;function u(l){return{props:{window:l[0],process:l[0].process}}}return a&&(n=Ht(a,u(r))),{c(){e=E("div"),s&&s.c(),t=j(),n&&le(n.$$.fragment),g(e,"style",i="height: "+r[2]+"px;"+r[3]),g(e,"class",r[4]),Se(e,"overflow-y-scroll",!0),Se(e,"scrollbar-hide",!0)},m(l,c){P(l,e,c),s&&s.m(e,null),D(e,t),n&&oe(n,e,null),o=!0},p(l,[c]){l[1]?s?s.p(l,c):(s=rr(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null);const d={};if(c&1&&(d.window=l[0]),c&1&&(d.process=l[0].process),a!==(a=l[0].component)){if(n){pt();const h=n;q(h.$$.fragment,1,0,()=>{se(h,1)}),mt()}a?(n=Ht(a,u(l)),le(n.$$.fragment),Z(n.$$.fragment,1),oe(n,e,null)):n=null}else a&&n.$set(d);(!o||c&12&&i!==(i="height: "+l[2]+"px;"+l[3]))&&g(e,"style",i),(!o||c&16)&&g(e,"class",l[4]),(!o||c&16)&&Se(e,"overflow-y-scroll",!0),(!o||c&16)&&Se(e,"scrollbar-hide",!0)},i(l){o||(n&&Z(n.$$.fragment,l),o=!0)},o(l){n&&q(n.$$.fragment,l),o=!1},d(l){l&&k(e),s&&s.d(),n&&se(n)}}}function Qn(r,e,t){let n,i,o,s,{window:a}=e,{notImportant:u}=e,{style:l,classes:c,height:d,width:h}=a.stores;return Y(r,l,f=>t(3,i=f)),Y(r,c,f=>t(4,o=f)),Y(r,d,f=>t(2,n=f)),Y(r,h,f=>t(5,s=f)),r.$$set=f=>{"window"in f&&t(0,a=f.window),"notImportant"in f&&t(1,u=f.notImportant)},[a,u,n,i,o,s,l,c,d,h]}class ei extends fe{constructor(e){super(),ce(this,e,Qn,Hn,ae,{window:0,notImportant:1})}}function nr(r){let e,t,n;return{c(){e=E("img"),De(e.src,t=r[8])||g(e,"src",t),g(e,"alt",n=r[9]+" icon"),g(e,"height",18),g(e,"width",18),g(e,"class","ml-1.5")},m(i,o){P(i,e,o)},p(i,o){o[0]&256&&!De(e.src,t=i[8])&&g(e,"src",t),o[0]&512&&n!==(n=i[9]+" icon")&&g(e,"alt",n)},d(i){i&&k(e)}}}function ti(r){let e,t;return{c(){e=E("span"),t=B(r[9]),g(e,"class","pl-2 text-gray-400")},m(n,i){P(n,e,i),D(e,t)},p(n,i){i[0]&512&&Ae(t,n[9])},d(n){n&&k(e)}}}function ri(r){let e,t;return{c(){e=E("span"),t=B(r[9]),g(e,"class","pl-2")},m(n,i){P(n,e,i),D(e,t)},p(n,i){i[0]&512&&Ae(t,n[9])},d(n){n&&k(e)}}}function ir(r){let e,t,n;return{c(){e=E("span"),e.textContent="_",g(e,"class","pr-1.5")},m(i,o){P(i,e,o),t||(n=V(e,"click",r[25]),t=!0)},p:C,d(i){i&&k(e),t=!1,n()}}}function or(r){let e;return{c(){e=E("span"),e.textContent="□",g(e,"class","pr-1.5")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function ni(r){let e;return{c(){e=E("span"),e.textContent="x",g(e,"class","text-gray-500")},m(t,n){P(t,e,n)},p:C,d(t){t&&k(e)}}}function ii(r){let e,t,n;return{c(){e=E("span"),e.textContent="x"},m(i,o){P(i,e,o),t||(n=V(e,"click",r[26]),t=!0)},p:C,d(i){i&&k(e),t=!1,n()}}}function oi(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y=r[8]!==void 0&&r[8].length!==0&&nr(r);function _(b,O){return b[10]===b[0]?ri:ti}let w=_(r),v=w(r),p=r[11].minimize&&ir(r),S=r[11].maximize&&or();function N(b,O){return b[11].close?ii:ni}let x=N(r),F=x(r);return d=new ei({props:{window:r[0],notImportant:r[2]}}),{c(){e=E("div"),t=E("div"),n=E("div"),y&&y.c(),i=j(),v.c(),o=j(),s=E("div"),a=E("span"),p&&p.c(),u=j(),S&&S.c(),l=j(),F.c(),c=j(),le(d.$$.fragment),g(n,"class","flex items-center"),g(a,"class","pr-2.5 mb-1"),g(s,"class","flex items-center"),g(t,"class","h-7 flex justify-between title-bar text-sm rounded-t-md rounded-sm select-none svelte-jpt6my"),ee(t,"width",r[4]-2+"px"),g(e,"class","absolute border rounded-t-md rounded-sm border-gray-800 drop-shadow-md window-spawn"),ee(e,"width",r[4]+"px"),ee(e,"left",r[5]+"px"),ee(e,"top",r[6]+"px"),ee(e,"z-index",r[7]),Se(e,"hidden",!r[3])},m(b,O){P(b,e,O),D(e,t),D(t,n),y&&y.m(n,null),D(n,i),v.m(n,null),D(t,o),D(t,s),D(s,a),p&&p.m(a,null),D(a,u),S&&S.m(a,null),D(a,l),F.m(a,null),r[27](t),D(e,c),oe(d,e,null),r[28](e),h=!0,f||(m=[V(t,"mousedown",r[22]),V(t,"mouseup",r[23]),V(t,"mousemove",r[24]),V(e,"mousedown",r[29])],f=!0)},p(b,O){b[8]!==void 0&&b[8].length!==0?y?y.p(b,O):(y=nr(b),y.c(),y.m(n,i)):y&&(y.d(1),y=null),w===(w=_(b))&&v?v.p(b,O):(v.d(1),v=w(b),v&&(v.c(),v.m(n,null))),b[11].minimize?p?p.p(b,O):(p=ir(b),p.c(),p.m(a,u)):p&&(p.d(1),p=null),b[11].maximize?S||(S=or(),S.c(),S.m(a,l)):S&&(S.d(1),S=null),x===(x=N(b))&&F?F.p(b,O):(F.d(1),F=x(b),F&&(F.c(),F.m(a,null))),(!h||O[0]&16)&&ee(t,"width",b[4]-2+"px");const W={};O[0]&1&&(W.window=b[0]),O[0]&4&&(W.notImportant=b[2]),d.$set(W),(!h||O[0]&16)&&ee(e,"width",b[4]+"px"),(!h||O[0]&32)&&ee(e,"left",b[5]+"px"),(!h||O[0]&64)&&ee(e,"top",b[6]+"px"),(!h||O[0]&128)&&ee(e,"z-index",b[7]),(!h||O[0]&8)&&Se(e,"hidden",!b[3])},i(b){h||(Z(d.$$.fragment,b),h=!0)},o(b){q(d.$$.fragment,b),h=!1},d(b){b&&k(e),y&&y.d(),v.d(),p&&p.d(),S&&S.d(),F.d(),r[27](null),se(d),r[28](null),f=!1,ke(m)}}}function sr(r){let e=0,t=0;if(r instanceof MouseEvent)e=r.pageX,t=r.pageY;else if(r instanceof TouchEvent){const n=r.touches[0];e=n.pageX,t=n.pageY}return[e,t]}function si(r,e,t){let n,i,o,s,a,u,l,c,d,h,{window:f}=e,{classes:m,title:y,icon:_,x:w,y:v,width:p,height:S,style:N,controlButtons:x,isVisible:F,zIndex:b}=f.stores;Y(r,y,R=>t(9,c=R)),Y(r,_,R=>t(8,l=R)),Y(r,w,R=>t(5,s=R)),Y(r,v,R=>t(6,a=R)),Y(r,p,R=>t(4,o=R)),Y(r,x,R=>t(11,h=R)),Y(r,F,R=>t(3,i=R)),Y(r,b,R=>t(7,u=R));let O,W,K,G=!1;Lr(()=>{t(0,f.zIndex=Je(),f)});function we(){n||(T.activeWindow=f,f.zIndex<=tr()&&t(0,f.zIndex=Je(),f))}let{activeWindowStore:ve}=T;Y(r,ve,R=>t(10,d=R));function Fe(R){if(n||R instanceof MouseEvent&&R.button!==0)return;let[L,xe]=sr(R);const be=document.body,rt=O.getBoundingClientRect();W=L-(rt.left+be.scrollLeft-be.clientLeft),K=xe-(rt.top+be.scrollTop-be.clientTop),G=!0,f.zIndex<=tr()&&t(0,f.zIndex=Je(),f),R instanceof MouseEvent&&R.preventDefault(),document.addEventListener("mousemove",Pe=>{ie(Pe)}),document.addEventListener("mouseup",Pe=>{de(Pe)}),document.addEventListener("touchmove",Pe=>{ie(Pe)},{passive:!1}),document.addEventListener("touchend",Pe=>{de(Pe)},{passive:!1}),f.dragStart.trigger()}function de(R){R instanceof MouseEvent&&R.button!==0||(G=!1,R instanceof MouseEvent&&R.preventDefault(),document.removeEventListener("mousemove",L=>{ie(L)}),document.removeEventListener("mouseup",L=>{de(L)}),document.removeEventListener("touchmove",L=>{ie(L)}),document.removeEventListener("touchend",L=>{de(L)}),f.dragStop.trigger())}function ie(R){if(n||!G)return;let[L,xe]=sr(R),be=L-(W??0),rt=xe-(K??0);t(0,f.x=Math.max(0,be),f),t(0,f.y=Math.max(0,rt),f),R.preventDefault()}const Ze=()=>f.hide(),wt=()=>f.close();function bt(R){Ge[R?"unshift":"push"](()=>{O=R,t(1,O)})}function _t(R){Ge[R?"unshift":"push"](()=>{f.windowElement=R,t(0,f)})}const U=()=>we();return r.$$set=R=>{"window"in R&&t(0,f=R.window)},r.$$.update=()=>{r.$$.dirty[0]&1&&t(2,n=f.process.getImportantWindows().length!=0&&!f.important)},[f,O,n,i,o,s,a,u,l,c,d,h,y,_,w,v,p,x,F,b,we,ve,Fe,de,ie,Ze,wt,bt,_t,U]}class ai extends fe{constructor(e){super(),ce(this,e,si,oi,ae,{window:0},null,[-1,-1])}}function ar(r,e,t){const n=r.slice();return n[3]=e[t],n}function lr(r,e){let t,n,i;return n=new ai({props:{window:e[3]}}),{key:r,first:null,c(){t=ht(),le(n.$$.fragment),this.first=t},m(o,s){P(o,t,s),oe(n,o,s),i=!0},p(o,s){e=o;const a={};s&1&&(a.window=e[3]),n.$set(a)},i(o){i||(Z(n.$$.fragment,o),i=!0)},o(o){q(n.$$.fragment,o),i=!1},d(o){o&&k(t),se(n,o)}}}function li(r){let e=[],t=new Map,n,i,o=r[0];const s=a=>a[3];for(let a=0;a<o.length;a+=1){let u=ar(r,o,a),l=s(u);t.set(l,e[a]=lr(l,u))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=ht()},m(a,u){for(let l=0;l<e.length;l+=1)e[l].m(a,u);P(a,n,u),i=!0},p(a,[u]){u&1&&(o=a[0],pt(),e=Mt(e,u,s,1,a,o,t,n.parentNode,Un,lr,n,ar),mt())},i(a){if(!i){for(let u=0;u<o.length;u+=1)Z(e[u]);i=!0}},o(a){for(let u=0;u<e.length;u+=1)q(e[u]);i=!1},d(a){for(let u=0;u<e.length;u+=1)e[u].d(a);a&&k(n)}}}function ui(r,e,t){let n,i,o=T.windowsStore;return Y(r,o,s=>t(2,i=s)),r.$$.update=()=>{r.$$.dirty&4&&t(0,n=i)},[n,o,i]}class ci extends fe{constructor(e){super(),ce(this,e,ui,li,ae,{})}}const Yr="/assets/mastrielIcon-6c62ac08.svg",$e=class{constructor(e,t,n=Yr){this.name=e,this.mainWindow=t,this.icon=n}};let ne=$e;A(ne,"registeredApps",[]),A(ne,"registerApp",e=>{$e.registeredApps.push(e)}),A(ne,"getApp",e=>$e.registeredApps.find(t=>t.name==e)),A(ne,"getAllApps",()=>[...$e.registeredApps]),A(ne,"getAppByType",e=>{let t=$e.registeredApps.find(n=>n instanceof e);if(t==null)throw new Error("Invalid app specified. Is it registered?");return t});let ur=0;function fi(){return ur++,ur-1}function cr(r){let e,t,n;return{c(){e=E("button"),e.textContent="Continue"},m(i,o){P(i,e,o),t||(n=V(e,"mousedown",r[3]),t=!0)},p:C,d(i){i&&k(e),t=!1,n()}}}function di(r){let e,t,n,i,o=r[0].message+"",s,a,u,l,c,d,h,f=!r[0].unrecoverable&&cr(r);return{c(){e=E("div"),t=E("div"),n=E("div"),i=E("span"),s=B(o),a=j(),u=E("div"),f&&f.c(),l=j(),c=E("button"),c.textContent="End Process",g(i,"class","text-center error-message whitespace-pre-line select-text svelte-wbgunv"),g(i,"style",""),g(n,"class","flex justify-center"),g(t,"class","h-20 error-message overflow-y-scroll scrollbar-hide svelte-wbgunv"),ee(t,"width",r[1]+"px"),g(e,"class","bg-red-800 border-b border-b-red-700 pt-3 drop-shadow-xl"),g(u,"class","flex justify-around pt-5")},m(m,y){P(m,e,y),D(e,t),D(t,n),D(n,i),D(i,s),P(m,a,y),P(m,u,y),f&&f.m(u,null),D(u,l),D(u,c),d||(h=V(c,"mousedown",r[4]),d=!0)},p(m,[y]){y&1&&o!==(o=m[0].message+"")&&Ae(s,o),y&2&&ee(t,"width",m[1]+"px"),m[0].unrecoverable?f&&(f.d(1),f=null):f?f.p(m,y):(f=cr(m),f.c(),f.m(u,l))},i:C,o:C,d(m){m&&k(e),m&&k(a),m&&k(u),f&&f.d(),d=!1,h()}}}function hi(r,e,t){let n,{process:i}=e,{window:o}=e,{width:s}=o.stores;Y(r,s,l=>t(1,n=l)),o.classes="bg-red-900",o.title=o.errorTitle,o.important=!0,o.controlButtons={maximize:!1,minimize:!1,close:!1},T.activeWindow=o,o.closeEvent.listen(()=>{T.activeWindow=o.spawner});const a=()=>{o.close(),T.activeWindow=i.mainWindow},u=()=>{i.kill()};return r.$$set=l=>{"process"in l&&t(5,i=l.process),"window"in l&&t(0,o=l.window)},[o,n,s,a,u,i]}class pi extends fe{constructor(e){super(),ce(this,e,hi,di,ae,{process:5,window:0})}}class fr extends T{constructor(e,t,n,i=!1){super(500,500,400,160,pi),this.errorTitle=e,this.message=t,this.spawner=n,this.unrecoverable=i}}const Re=class{constructor(e,t,n){A(this,"id");A(this,"app");A(this,"mainWindow");A(this,"lastActiveWindow");A(this,"options");A(this,"spawnWindow",e=>T.spawn(e,this));A(this,"kill",()=>{for(const e of this.getWindows())e.close();Re.processesStore.update(e=>e.filter(t=>t!=this))});A(this,"crash",(e,t)=>{this.spawnWindow(new fr("Fatal Error",`${this.app.name} has crashed:
${e}`,t,!0))});A(this,"error",(e,t)=>{this.spawnWindow(new fr("Error",`An error has occurred in ${this.app.name}:
${e}


hi`,t,!1))});this.id=t,this.app=e,n!=null&&(this.options=n)}getWindows(){return T.getWindows().filter(e=>e.process==this)??[]}getImportantWindows(){return this.getWindows().filter(e=>e.important)??[]}static mergeOptions(e,t){return{...t,...e}}};let ge=Re;A(ge,"processesStore",Br([])),A(ge,"getProcesses",()=>jr(Re.processesStore)),A(ge,"spawn",(e,t)=>{let n=ne.getAppByType(e),i=Re.mergeOptions(t,e.defaultOptions),o=new Re(n,fi(),i);Re.processesStore.update(a=>[...a,o]);let s=new T(300,300,400,400,n.mainWindow);return o.mainWindow=T.spawn(s,o),o.lastActiveWindow=o.mainWindow,o});function mi(r){const e=r-1;return e*e*e+1}function vi(r,{from:e,to:t},n={}){const i=getComputedStyle(r),o=i.transform==="none"?"":i.transform,[s,a]=i.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*s/t.width-(t.left+s),l=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:d=f=>Math.sqrt(f)*120,easing:h=mi}=n;return{delay:c,duration:et(d)?d(Math.sqrt(u*u+l*l)):d,easing:h,css:(f,m)=>{const y=m*u,_=m*l,w=f+m*e.width/t.width,v=f+m*e.height/t.height;return`transform: ${o} translate(${y}px, ${_}px) scale(${w}, ${v});`}}}function dr(r,e,t){const n=r.slice();return n[11]=e[t],n}function gi(r){let e;return{c(){e=E("span"),e.textContent=".",g(e,"class","text-center block")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function yi(r){let e;return{c(){e=E("span"),e.textContent="_",g(e,"class","text-center block")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function hr(r,e){let t,n,i,o,s,a,u,l,c,d=C,h,f;function m(v,p){return p&3&&(a=null),a==null&&(a=!!v[0](v[11])),a?yi:gi}let y=m(e,-1),_=y(e);function w(){return e[6](e[11])}return{key:r,first:null,c(){t=E("div"),n=E("img"),s=j(),_.c(),u=j(),De(n.src,i=e[11].app.icon)||g(n,"src",i),g(n,"width","30"),g(n,"height","30"),g(n,"alt",o=`${e[11].app.name}`),g(n,"class","translate-y-2.5"),g(t,"class",l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke"),this.first=t},m(v,p){P(v,t,p),D(t,n),D(t,s),_.m(t,null),D(t,u),h||(f=V(t,"click",w),h=!0)},p(v,p){e=v,p&2&&!De(n.src,i=e[11].app.icon)&&g(n,"src",i),p&2&&o!==(o=`${e[11].app.name}`)&&g(n,"alt",o),y!==(y=m(e,p))&&(_.d(1),_=y(e),_&&(_.c(),_.m(t,u))),p&3&&l!==(l=(e[0](e[11])?"selected":"unselected")+" process svelte-1h8nwke")&&g(t,"class",l)},r(){c=t.getBoundingClientRect()},f(){Vn(t),d()},a(){d(),d=Tn(t,c,vi,{duration:200})},d(v){v&&k(t),_.d(),h=!1,f()}}}function wi(r){let e,t,n,i,o,s,a=[],u=new Map,l=r[1];const c=d=>d[11];for(let d=0;d<l.length;d+=1){let h=dr(r,l,d),f=c(h);u.set(f,a[d]=hr(f,h))}return{c(){e=E("div"),e.innerHTML='<div class="h-12 w-screen z-0 bg-taskbar svelte-1h8nwke"></div>',t=j(),n=E("div"),n.innerHTML='<div class="h-12 w-screen max-z-index bg-taskbar-blur svelte-1h8nwke"></div>',i=j(),o=E("div"),s=E("div");for(let d=0;d<a.length;d+=1)a[d].c();g(e,"class","fixed bottom-0 z-0"),g(n,"class","fixed bottom-0 max-z-index svelte-1h8nwke"),g(s,"class","h-12 w-screen max-z-index taskbar-contents flex items-center justify-center gap-1 svelte-1h8nwke"),g(o,"class","fixed bottom-0 max-z-index svelte-1h8nwke")},m(d,h){P(d,e,h),P(d,t,h),P(d,n,h),P(d,i,h),P(d,o,h),D(o,s);for(let f=0;f<a.length;f+=1)a[f].m(s,null)},p(d,[h]){if(h&19){l=d[1];for(let f=0;f<a.length;f+=1)a[f].r();a=Mt(a,h,c,1,d,l,u,s,Yn,hr,null,dr);for(let f=0;f<a.length;f+=1)a[f].a()}},i:C,o:C,d(d){d&&k(e),d&&k(t),d&&k(n),d&&k(i),d&&k(o);for(let h=0;h<a.length;h+=1)a[h].d()}}}function bi(r,e,t){let n,i,o,s=ge.processesStore;Y(r,s,f=>t(1,o=f));let a=T.activeWindowStore;Y(r,a,f=>t(5,i=f));const u=f=>{n(f)?c(f):(l(f),d(f))},l=f=>{console.log(f),f.getWindows().forEach(m=>{m.unhide(),m.zIndex=Je()})},c=f=>{f.getWindows().forEach(m=>{m.hide(),T.activeWindow=void 0})},d=f=>{T.activeWindow=f.lastActiveWindow,console.log("Focus!"),f.getWindows().sort(m=>m.zIndex).forEach(m=>{console.log("Window!"),m.zIndex=Je()})},h=f=>u(f);return r.$$.update=()=>{r.$$.dirty&32&&t(0,n=f=>(i==null?void 0:i.process)===f)},[n,o,s,a,u,i,h]}class _i extends fe{constructor(e){super(),ce(this,e,bi,wi,ae,{})}}function Di(r){let e,t,n,i,o,s,a,u,l;return s=new ci({}),u=new _i({}),{c(){e=E("div"),t=E("img"),i=j(),o=E("div"),le(s.$$.fragment),a=j(),le(u.$$.fragment),De(t.src,n=Yr)||g(t,"src",n),g(t,"alt","Site icon"),g(t,"height",256),g(t,"width",256),g(t,"class","drop-shadow-3xl"),g(e,"class","flex items-center justify-center h-screen w-screen absolute"),g(o,"class","absolute")},m(c,d){P(c,e,d),D(e,t),P(c,i,d),P(c,o,d),oe(s,o,null),P(c,a,d),oe(u,c,d),l=!0},p:C,i(c){l||(Z(s.$$.fragment,c),Z(u.$$.fragment,c),l=!0)},o(c){q(s.$$.fragment,c),q(u.$$.fragment,c),l=!1},d(c){c&&k(e),c&&k(i),c&&k(o),se(s),c&&k(a),se(u,c)}}}class Ai extends fe{constructor(e){super(),ce(this,e,null,Di,ae,{})}}function Ei(r){return r[Math.floor(Math.random()*r.length)]}function Fi(r){return Math.floor(Math.random()*r)}const Jr="/assets/consoleIcon-9d1dc8de.svg",xi=r=>new Promise(e=>setTimeout(e,r)),Si="/assets/chatroomIcon-cd53aa5d.svg";function ki(r){let e,t,n;return{c(){e=E("iframe"),g(e,"class",t="w-full h-full "+(r[2]===r[0]?"pointer-events-auto":"pointer-events-none")),De(e.src,n="https://chatroom-d29ab.web.app/")||g(e,"src",n)},m(i,o){P(i,e,o),r[5](e)},p(i,[o]){o&5&&t!==(t="w-full h-full "+(i[2]===i[0]?"pointer-events-auto":"pointer-events-none"))&&g(e,"class",t)},i:C,o:C,d(i){i&&k(e),r[5](null)}}}function Oi(r,e,t){let n,{process:i}=e,{window:o}=e;o.icon=i.app.icon,o.width=600,o.height=600;let s;const a=()=>{s!=null&&t(1,s.style.pointerEvents="none",s)},u=()=>{s!=null&&t(1,s.style.pointerEvents="",s)};o.dragStart.listen(()=>{a()}),o.dragStop.listen(()=>{u()});let l=T.activeWindowStore;Y(r,l,d=>t(2,n=d));function c(d){Ge[d?"unshift":"push"](()=>{s=d,t(1,s)})}return r.$$set=d=>{"process"in d&&t(4,i=d.process),"window"in d&&t(0,o=d.window)},[o,s,n,l,i,c]}class Pi extends fe{constructor(e){super(),ce(this,e,Oi,ki,ae,{process:4,window:0})}}class Xr extends ne{constructor(){super("Chatroom",Pi,Si)}}function Tt(r){let e=r.replace("\\","/");return e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(0,e.length-1)),{fullPath:"/"+e.split("/").join("/"),type:"file"}}function ct(r){return{...Tt(r),type:"folder"}}function Vt(r){return r.fullPath.split("/").slice(1)}function pr(r){const e=Vt(r);return e[e.length-1]}function Ri(r){let e=Vt(r);return e.pop(),ct(e.join("/"))}function Ni(r){ft=r}let ft;const ji="/assets/fileIcon-0be6809a.svg",Ii="/assets/folderIcon-7558d802.svg",zi="/assets/folderBackIcon-fb3b0a43.svg";function mr(r,e,t){const n=r.slice();return n[13]=e[t],n[15]=t,n}function Ci(r){let e,t,n=r[16]+"",i;return{c(){e=E("span"),t=B("cannot load files! "),i=B(n)},m(o,s){P(o,e,s),D(e,t),D(e,i)},p(o,s){s&4&&n!==(n=o[16]+"")&&Ae(i,n)},d(o){o&&k(e)}}}function $i(r){let e,t=[],n=new Map,i=r[12];const o=s=>s[13].fullPath;for(let s=0;s<i.length;s+=1){let a=mr(r,i,s),u=o(a);n.set(u,t[s]=vr(u,a))}return{c(){e=E("div");for(let s=0;s<t.length;s+=1)t[s].c();g(e,"class","files-size overflow-y-scroll svelte-lc7jml")},m(s,a){P(s,e,a);for(let u=0;u<t.length;u+=1)t[u].m(e,null)},p(s,a){a&28&&(i=s[12],t=Mt(t,a,o,1,s,i,n,e,qr,vr,null,mr))},d(s){s&&k(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function vr(r,e){let t,n,i,o,s,a=pr(e[13])+"",u,l,c,d;function h(){return e[8](e[13])}return{key:r,first:null,c(){t=E("div"),n=E("img"),o=j(),s=E("span"),u=B(a),l=j(),De(n.src,i=e[3](e[13]))||g(n,"src",i),g(n,"alt","file icon"),g(n,"height",18),g(n,"width",18),g(s,"class","block pl-1"),g(t,"class","flex flex-grow svelte-lc7jml"),Se(t,"odd",e[15]%2===0),this.first=t},m(f,m){P(f,t,m),D(t,n),D(t,o),D(t,s),D(s,u),D(t,l),c||(d=V(t,"click",h),c=!0)},p(f,m){e=f,m&4&&!De(n.src,i=e[3](e[13]))&&g(n,"src",i),m&4&&a!==(a=pr(e[13])+"")&&Ae(u,a),m&4&&Se(t,"odd",e[15]%2===0)},d(f){f&&k(t),c=!1,d()}}}function Mi(r){let e;return{c(){e=E("span"),e.textContent="loading..."},m(t,n){P(t,e,n)},p:C,d(t){t&&k(e)}}}function Ti(r){let e,t,n,i,o=r[1]()+"",s,a,u,l,c,d,h,f,m,y,_,w={ctx:r,current:null,token:null,hasCatch:!0,pending:Mi,then:$i,catch:Ci,value:12,error:16};return er(m=r[2],w),{c(){e=E("div"),t=E("div"),n=E("span"),i=B(r[0]),s=B(o),a=j(),u=E("div"),l=E("div"),c=E("img"),h=j(),f=ht(),w.block.c(),g(n,"class","text-sm pl-5"),De(c.src,d=zi)||g(c,"src",d),g(c,"alt","file icon"),g(c,"height",24),g(c,"width",24),g(l,"class","flex icon-button p-0.5 svelte-lc7jml"),g(u,"class","flex pr-2"),g(t,"class","flex justify-between items-center"),g(e,"class","bg-gray-800 border-b border-b-gray-700 pt-2 pb-2 drop-shadow-xl")},m(v,p){P(v,e,p),D(e,t),D(t,n),D(n,i),D(n,s),D(t,a),D(t,u),D(u,l),D(l,c),P(v,h,p),P(v,f,p),w.block.m(v,w.anchor=p),w.mount=()=>f.parentNode,w.anchor=f,y||(_=V(l,"click",r[5]),y=!0)},p(v,[p]){r=v,p&1&&Ae(i,r[0]),p&2&&o!==(o=r[1]()+"")&&Ae(s,o),w.ctx=r,p&4&&m!==(m=r[2])&&er(m,w)||Bn(w,r,p)},i:C,o:C,d(v){v&&k(e),v&&k(h),v&&k(f),w.block.d(v),w.token=null,w=null,y=!1,_()}}}function Vi(r,e,t){let n,i,{process:o}=e,{window:s}=e,a="/";s.classes="bg-gray-900",s.title="Select a File",s.important=!0,s.controlButtons={maximize:!1,minimize:!1,close:!0},T.activeWindow=s,s.closeEvent.listen(()=>{s.returnNone()});const u=f=>f.type=="folder"?Ii:ji,l=f=>{if(f.type=="folder"){c(f);return}s.returnFile(f),s.close()},c=f=>{t(0,a=f.fullPath)},d=()=>{t(0,a=Ri(ct(a)).fullPath)},h=f=>l(f);return r.$$set=f=>{"process"in f&&t(7,o=f.process),"window"in f&&t(6,s=f.window)},r.$$.update=()=>{r.$$.dirty&1&&t(2,n=ft.getFiles(ct(a)).catch(console.error)),r.$$.dirty&1&&t(1,i=()=>a=="/"?"":"/")},[a,i,n,u,l,d,s,o,h]}class Wi extends fe{constructor(e){super(),ce(this,e,Vi,Ti,ae,{process:7,window:6})}}class Zi extends T{constructor(t,n){super(500,500,500,400,Wi);A(this,"promise");A(this,"resolve");A(this,"reject");A(this,"returnFile",t=>this.resolve(t));A(this,"returnNone",()=>this.reject("process exit"));A(this,"getFile",async()=>await this.promise);this.spawner=t,this.extensionMask=n,this.promise=new Promise((i,o)=>{this.resolve=i,this.reject=o})}}function Li(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y,_,w,v,p,S=(r[0]??"none")+"",N,x,F,b,O,W;return{c(){e=E("div"),t=E("span"),t.textContent="Remove process",n=j(),i=E("span"),i.textContent="Update color",o=j(),s=E("span"),s.textContent="Update title",a=j(),u=E("span"),u.textContent="Spawn another",l=j(),c=E("span"),c.textContent="Show error",d=j(),h=E("span"),h.textContent="Show unrecoverable error",f=j(),m=E("span"),m.textContent="Turn invisible temporarily",y=j(),_=E("span"),_.textContent="Open Chatroom",w=j(),v=E("span"),p=B("Select File (selected: "),N=B(S),x=B(")"),F=j(),b=E("span"),b.textContent="Create example.txt",g(t,"class","link svelte-18apmpb"),g(i,"class","link svelte-18apmpb"),g(s,"class","link svelte-18apmpb"),g(u,"class","link svelte-18apmpb"),g(c,"class","link svelte-18apmpb"),g(h,"class","link svelte-18apmpb"),g(m,"class","link svelte-18apmpb"),g(_,"class","link svelte-18apmpb"),g(v,"class","link svelte-18apmpb"),g(b,"class","link svelte-18apmpb"),g(e,"class","pt-2 pl-3 options svelte-18apmpb")},m(K,G){P(K,e,G),D(e,t),D(e,n),D(e,i),D(e,o),D(e,s),D(e,a),D(e,u),D(e,l),D(e,c),D(e,d),D(e,h),D(e,f),D(e,m),D(e,y),D(e,_),D(e,w),D(e,v),D(v,p),D(v,N),D(v,x),D(e,F),D(e,b),O||(W=[V(t,"click",r[1]),V(i,"click",r[3]),V(s,"click",r[4]),V(u,"click",r[2]),V(c,"click",r[5]),V(h,"click",r[6]),V(m,"click",r[7]),V(_,"click",r[8]),V(v,"click",r[9]),V(b,"click",r[10])],O=!0)},p(K,[G]){G&1&&S!==(S=(K[0]??"none")+"")&&Ae(N,S)},i:C,o:C,d(K){K&&k(e),O=!1,ke(W)}}}function qi(r,e,t){let{process:n}=e,{window:i}=e,o=n.options;i.icon=Jr,i.style="background-color: "+o.backgroundColor;let s;Lr(()=>{s=0});function a(){n.kill(),console.log("Process killed!")}const u=()=>{let p=ge.spawn(vt);console.log("New process spawned!"),console.log(p),T.activeWindow=p.mainWindow},l=()=>{let p=["bg-red","bg-blue","bg-lime","bg-black"];t(11,i.classes=Ei(p),i),console.log("Color updated!")},c=()=>{s+=1,t(11,i.title=s.toString(),i),console.log("Title updated!")},d=()=>{n.error("User has initiated an error.",i)},h=()=>{n.crash("User has forced a crash.",i)},f=async()=>{t(11,i.isVisible=!1,i),await xi(3e3),t(11,i.isVisible=!0,i)},m=async()=>{let p=ge.spawn(Xr);T.activeWindow=p.mainWindow};let y,_;const w=async()=>{y=await T.spawn(new Zi(i,void 0),n).getFile(),t(0,_=await ft.readString(y))},v=async()=>{await ft.writeString(Tt(`example-${Fi(1e3)}.txt`),"hi!")};return r.$$set=p=>{"process"in p&&t(12,n=p.process),"window"in p&&t(11,i=p.window)},[_,a,u,l,c,d,h,f,m,w,v,i,n]}class Bi extends fe{constructor(e){super(),ce(this,e,qi,Li,ae,{process:12,window:11})}}class vt extends ne{constructor(){super("Developer Console",Bi,Jr)}}A(vt,"defaultOptions",{backgroundColor:"#000000"});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var dt=function(){return dt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dt.apply(this,arguments)};function Ui(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function M(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{l(n.next(c))}catch(d){s(d)}}function u(c){try{l(n.throw(c))}catch(d){s(d)}}function l(c){c.done?o(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function $(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){t.label=l[1];break}if(l[0]===6&&t.label<o[1]){t.label=o[1],o=l;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(l);break}o[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Ve=function(r){return typeof r=="string"||r instanceof String},Yi=new RegExp("^([A-Za-z]:|[A-Za-z0-9_-]+(.[A-Za-z0-9_-]+)*)((/[A-Za-z0-9_.-]+)+)$");function Ji(r){return Ve(r)?Yi.test(r):!1}var He=function(r,e){return M(void 0,void 0,void 0,function(){var t;return $(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,r()];case 1:return[2,n.sent()];case 2:return t=n.sent(),e&&e(t),[3,3];case 3:return[2,null]}})})};function Xi(r){return!Ve(r)||r.length===0?!1:r[0]==="/"}function Kr(r,e){for(var t=0,n=r.length-1;n>=0;n--){var i=r[n];i==="."?r.splice(n,1):i===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}var Ki=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,Wt=function(r){return Ki.exec(r).slice(1)};function Ot(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=Kr(Zt(r.split("/"),function(i){return!!i}),!e).join("/"),(e?"/":"")+r||"."}function Gr(r){var e=Hr(r),t=io(r,-1)==="/";return r=Kr(Zt(r.split("/"),function(n){return!!n}),!e).join("/"),!r&&!e&&(r="."),r&&t&&(r+="/"),(e?"/":"")+r}function Hr(r){return r.charAt(0)==="/"}function Gi(){var r=Array.prototype.slice.call(arguments,0);return Gr(Zt(r,function(e,t){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function Hi(r,e){r=Ot(r).substr(1),e=Ot(e).substr(1);function t(l){for(var c=0;c<l.length&&l[c]==="";c++);for(var d=l.length-1;d>=0&&l[d]==="";d--);return c>d?[]:l.slice(c,d-c+1)}for(var n=t(r.split("/")),i=t(e.split("/")),o=Math.min(n.length,i.length),s=o,a=0;a<o;a++)if(n[a]!==i[a]){s=a;break}for(var u=[],a=s;a<n.length;a++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")}var Qi="/",eo=":";function to(r){var e=Wt(r),t=e[0],n=e[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)}function ro(r,e){var t=Wt(r)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t}function no(r){return Wt(r)[3]}var gt={extname:no,basename:ro,dirname:to,sep:Qi,delimiter:eo,relative:Hi,join:Gi,isAbsolute:Hr,normalize:Gr,resolve:Ot};function Zt(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var io="ab".substr(-1)==="b"?function(r,e,t){return r.substr(e,t)}:function(r,e,t){return e<0&&(e=r.length+e),r.substr(e,t)};function We(r,e){var t=gt.dirname(r);return t==="."?e:t}function oo(r){if(r.__esModule)return r;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(r).forEach(function(t){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}),e}/*! https://mths.be/punycode v1.4.1 by @mathias */var At=2147483647,Xe=36,Qr=1,Pt=26,so=38,ao=700,lo=72,uo=128,co="-",fo=/[^\x20-\x7E]/,ho=/[\x2E\u3002\uFF0E\uFF61]/g,po={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Et=Xe-Qr,Ce=Math.floor,Ft=String.fromCharCode;function gr(r){throw new RangeError(po[r])}function mo(r,e){for(var t=r.length,n=[];t--;)n[t]=e(r[t]);return n}function vo(r,e){var t=r.split("@"),n="";t.length>1&&(n=t[0]+"@",r=t[1]),r=r.replace(ho,".");var i=r.split("."),o=mo(i,e).join(".");return n+o}function go(r){for(var e=[],t=0,n=r.length,i,o;t<n;)i=r.charCodeAt(t++),i>=55296&&i<=56319&&t<n?(o=r.charCodeAt(t++),(o&64512)==56320?e.push(((i&1023)<<10)+(o&1023)+65536):(e.push(i),t--)):e.push(i);return e}function yr(r,e){return r+22+75*(r<26)-((e!=0)<<5)}function yo(r,e,t){var n=0;for(r=t?Ce(r/ao):r>>1,r+=Ce(r/e);r>Et*Pt>>1;n+=Xe)r=Ce(r/Et);return Ce(n+(Et+1)*r/(r+so))}function wo(r){var e,t,n,i,o,s,a,u,l,c,d,h=[],f,m,y,_;for(r=go(r),f=r.length,e=uo,t=0,o=lo,s=0;s<f;++s)d=r[s],d<128&&h.push(Ft(d));for(n=i=h.length,i&&h.push(co);n<f;){for(a=At,s=0;s<f;++s)d=r[s],d>=e&&d<a&&(a=d);for(m=n+1,a-e>Ce((At-t)/m)&&gr("overflow"),t+=(a-e)*m,e=a,s=0;s<f;++s)if(d=r[s],d<e&&++t>At&&gr("overflow"),d==e){for(u=t,l=Xe;c=l<=o?Qr:l>=o+Pt?Pt:l-o,!(u<c);l+=Xe)_=u-c,y=Xe-c,h.push(Ft(yr(c+_%y,0))),u=Ce(_/y);h.push(Ft(yr(u,0))),o=yo(t,m,n==i),t=0,++n}++t,++e}return h.join("")}function bo(r){return vo(r,function(e){return fo.test(e)?"xn--"+wo(e):e})}function ot(r){return r===null}function _o(r){return r==null}function Lt(r){return typeof r=="string"}function en(r){return typeof r=="object"&&r!==null}function Do(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var tn=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function qe(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}}function Ao(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?wr(Eo(r),function(i){var o=encodeURIComponent(qe(i))+t;return tn(r[i])?wr(r[i],function(s){return o+encodeURIComponent(qe(s))}).join(e):o+encodeURIComponent(qe(r[i]))}).join(e):n?encodeURIComponent(qe(n))+t+encodeURIComponent(qe(r)):""}function wr(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var Eo=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};function br(r,e,t,n){e=e||"&",t=t||"=";var i={};if(typeof r!="string"||r.length===0)return i;var o=/\+/g;r=r.split(e);var s=1e3;n&&typeof n.maxKeys=="number"&&(s=n.maxKeys);var a=r.length;s>0&&a>s&&(a=s);for(var u=0;u<a;++u){var l=r[u].replace(o,"%20"),c=l.indexOf(t),d,h,f,m;c>=0?(d=l.substr(0,c),h=l.substr(c+1)):(d=l,h=""),f=decodeURIComponent(d),m=decodeURIComponent(h),Do(i,f)?tn(i[f])?i[f].push(m):i[f]=[i[f],m]:i[f]=m}return i}var Fo={parse:tt,resolve:on,resolveObject:sn,format:nn,Url:me};function me(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var xo=/^([a-z0-9.+-]+:)/i,So=/:[0-9]*$/,ko=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Oo=["<",">",'"',"`"," ","\r",`
`,"	"],Po=["{","}","|","\\","^","`"].concat(Oo),Rt=["'"].concat(Po),_r=["%","/","?",";","#"].concat(Rt),Dr=["/","?","#"],Ro=255,Ar=/^[+a-z0-9A-Z_-]{0,63}$/,No=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,jo={javascript:!0,"javascript:":!0},Nt={javascript:!0,"javascript:":!0},Te={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function tt(r,e,t){if(r&&en(r)&&r instanceof me)return r;var n=new me;return n.parse(r,e,t),n}me.prototype.parse=function(r,e,t){return rn(this,r,e,t)};function rn(r,e,t,n){if(!Lt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=i!==-1&&i<e.indexOf("#")?"?":"#",s=e.split(o),a=/\\/g;s[0]=s[0].replace(a,"/"),e=s.join(o);var u=e;if(u=u.trim(),!n&&e.split("#").length===1){var l=ko.exec(u);if(l)return r.path=u,r.href=u,r.pathname=l[1],l[2]?(r.search=l[2],t?r.query=br(r.search.substr(1)):r.query=r.search.substr(1)):t&&(r.search="",r.query={}),r}var c=xo.exec(u);if(c){c=c[0];var d=c.toLowerCase();r.protocol=d,u=u.substr(c.length)}if(n||c||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=u.substr(0,2)==="//";h&&!(c&&Nt[c])&&(u=u.substr(2),r.slashes=!0)}var f,m,y,_;if(!Nt[c]&&(h||c&&!Te[c])){var w=-1;for(f=0;f<Dr.length;f++)m=u.indexOf(Dr[f]),m!==-1&&(w===-1||m<w)&&(w=m);var v,p;for(w===-1?p=u.lastIndexOf("@"):p=u.lastIndexOf("@",w),p!==-1&&(v=u.slice(0,p),u=u.slice(p+1),r.auth=decodeURIComponent(v)),w=-1,f=0;f<_r.length;f++)m=u.indexOf(_r[f]),m!==-1&&(w===-1||m<w)&&(w=m);w===-1&&(w=u.length),r.host=u.slice(0,w),u=u.slice(w),an(r),r.hostname=r.hostname||"";var S=r.hostname[0]==="["&&r.hostname[r.hostname.length-1]==="]";if(!S){var N=r.hostname.split(/\./);for(f=0,y=N.length;f<y;f++){var x=N[f];if(x&&!x.match(Ar)){for(var F="",b=0,O=x.length;b<O;b++)x.charCodeAt(b)>127?F+="x":F+=x[b];if(!F.match(Ar)){var W=N.slice(0,f),K=N.slice(f+1),G=x.match(No);G&&(W.push(G[1]),K.unshift(G[2])),K.length&&(u="/"+K.join(".")+u),r.hostname=W.join(".");break}}}}r.hostname.length>Ro?r.hostname="":r.hostname=r.hostname.toLowerCase(),S||(r.hostname=bo(r.hostname)),_=r.port?":"+r.port:"";var we=r.hostname||"";r.host=we+_,r.href+=r.host,S&&(r.hostname=r.hostname.substr(1,r.hostname.length-2),u[0]!=="/"&&(u="/"+u))}if(!jo[d])for(f=0,y=Rt.length;f<y;f++){var ve=Rt[f];if(u.indexOf(ve)!==-1){var Fe=encodeURIComponent(ve);Fe===ve&&(Fe=escape(ve)),u=u.split(ve).join(Fe)}}var de=u.indexOf("#");de!==-1&&(r.hash=u.substr(de),u=u.slice(0,de));var ie=u.indexOf("?");if(ie!==-1?(r.search=u.substr(ie),r.query=u.substr(ie+1),t&&(r.query=br(r.query)),u=u.slice(0,ie)):t&&(r.search="",r.query={}),u&&(r.pathname=u),Te[d]&&r.hostname&&!r.pathname&&(r.pathname="/"),r.pathname||r.search){_=r.pathname||"";var Ze=r.search||"";r.path=_+Ze}return r.href=qt(r),r}function nn(r){return Lt(r)&&(r=rn({},r)),qt(r)}function qt(r){var e=r.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=r.protocol||"",n=r.pathname||"",i=r.hash||"",o=!1,s="";r.host?o=e+r.host:r.hostname&&(o=e+(r.hostname.indexOf(":")===-1?r.hostname:"["+this.hostname+"]"),r.port&&(o+=":"+r.port)),r.query&&en(r.query)&&Object.keys(r.query).length&&(s=Ao(r.query));var a=r.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),r.slashes||(!t||Te[t])&&o!==!1?(o="//"+(o||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),a&&a.charAt(0)!=="?"&&(a="?"+a),n=n.replace(/[?#]/g,function(u){return encodeURIComponent(u)}),a=a.replace("#","%23"),t+o+n+a+i}me.prototype.format=function(){return qt(this)};function on(r,e){return tt(r,!1,!0).resolve(e)}me.prototype.resolve=function(r){return this.resolveObject(tt(r,!1,!0)).format()};function sn(r,e){return r?tt(r,!1,!0).resolveObject(e):e}me.prototype.resolveObject=function(r){if(Lt(r)){var e=new me;e.parse(r,!1,!0),r=e}for(var t=new me,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var u=s[a];u!=="protocol"&&(t[u]=r[u])}return Te[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}var l;if(r.protocol&&r.protocol!==t.protocol){if(!Te[r.protocol]){for(var c=Object.keys(r),d=0;d<c.length;d++){var h=c[d];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Nt[r.protocol]){for(l=(r.pathname||"").split("/");l.length&&!(r.host=l.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),l[0]!==""&&l.unshift(""),l.length<2&&l.unshift(""),t.pathname=l.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var f=t.pathname||"",m=t.search||"";t.path=f+m}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var y=t.pathname&&t.pathname.charAt(0)==="/",_=r.host||r.pathname&&r.pathname.charAt(0)==="/",w=_||y||t.host&&r.pathname,v=w,p=t.pathname&&t.pathname.split("/")||[],S=t.protocol&&!Te[t.protocol];l=r.pathname&&r.pathname.split("/")||[],S&&(t.hostname="",t.port=null,t.host&&(p[0]===""?p[0]=t.host:p.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(l[0]===""?l[0]=r.host:l.unshift(r.host)),r.host=null),w=w&&(l[0]===""||p[0]===""));var N;if(_)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,p=l;else if(l.length)p||(p=[]),p.pop(),p=p.concat(l),t.search=r.search,t.query=r.query;else if(!_o(r.search))return S&&(t.hostname=t.host=p.shift(),N=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,N&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),t.search=r.search,t.query=r.query,(!ot(t.pathname)||!ot(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!p.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var x=p.slice(-1)[0],F=(t.host||r.host||p.length>1)&&(x==="."||x==="..")||x==="",b=0,O=p.length;O>=0;O--)x=p[O],x==="."?p.splice(O,1):x===".."?(p.splice(O,1),b++):b&&(p.splice(O,1),b--);if(!w&&!v)for(;b--;b)p.unshift("..");w&&p[0]!==""&&(!p[0]||p[0].charAt(0)!=="/")&&p.unshift(""),F&&p.join("/").substr(-1)!=="/"&&p.push("");var W=p[0]===""||p[0]&&p[0].charAt(0)==="/";return S&&(t.hostname=t.host=W?"":p.length?p.shift():"",N=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1,N&&(t.auth=N.shift(),t.host=t.hostname=N.shift())),w=w||t.host&&p.length,w&&!W&&p.unshift(""),p.length?t.pathname=p.join("/"):(t.pathname=null,t.path=null),(!ot(t.pathname)||!ot(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};me.prototype.parseHost=function(){return an(this)};function an(r){var e=r.host,t=So.exec(e);t&&(t=t[0],t!==":"&&(r.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(r.hostname=e)}var Io=Object.freeze({__proto__:null,parse:tt,resolve:on,resolveObject:sn,format:nn,default:Fo,Url:me}),Bt=oo(Io),H={},ln=Bt,jt=H.ValidationError=function(e,t,n,i,o,s){if(Array.isArray(i)?(this.path=i,this.property=i.reduce(function(u,l){return u+un(l)},"instance")):i!==void 0&&(this.property=i),e&&(this.message=e),n){var a=n.$id||n.id;this.schema=a||n}t!==void 0&&(this.instance=t),this.name=o,this.argument=s,this.stack=this.toString()};jt.prototype.toString=function(){return this.property+" "+this.message};var yt=H.ValidatorResult=function(e,t,n,i){this.instance=e,this.schema=t,this.options=n,this.path=i.path,this.propertyPath=i.propertyPath,this.errors=[],this.throwError=n&&n.throwError,this.throwFirst=n&&n.throwFirst,this.throwAll=n&&n.throwAll,this.disableFormat=n&&n.disableFormat===!0};yt.prototype.addError=function(e){var t;if(typeof e=="string")t=new jt(e,this.instance,this.schema,this.path);else{if(!e)throw new Error("Missing error detail");if(!e.message)throw new Error("Missing error message");if(!e.name)throw new Error("Missing validator type");t=new jt(e.message,this.instance,this.schema,this.path,e.name,e.argument)}if(this.errors.push(t),this.throwFirst)throw new je(this);if(this.throwError)throw t;return t};yt.prototype.importErrors=function(e){typeof e=="string"||e&&e.validatorType?this.addError(e):e&&e.errors&&Array.prototype.push.apply(this.errors,e.errors)};function zo(r,e){return e+": "+r.toString()+`
`}yt.prototype.toString=function(e){return this.errors.map(zo).join("")};Object.defineProperty(yt.prototype,"valid",{get:function(){return!this.errors.length}});H.ValidatorResultError=je;function je(r){Error.captureStackTrace&&Error.captureStackTrace(this,je),this.instance=r.instance,this.schema=r.schema,this.options=r.options,this.errors=r.errors}je.prototype=new Error;je.prototype.constructor=je;je.prototype.name="Validation Error";var Er=H.SchemaError=function r(e,t){this.message=e,this.schema=t,Error.call(this,e),Error.captureStackTrace(this,r)};Er.prototype=Object.create(Error.prototype,{constructor:{value:Er,enumerable:!1},name:{value:"SchemaError",enumerable:!1}});var It=H.SchemaContext=function(e,t,n,i,o){this.schema=e,this.options=t,Array.isArray(n)?(this.path=n,this.propertyPath=n.reduce(function(s,a){return s+un(a)},"instance")):this.propertyPath=n,this.base=i,this.schemas=o};It.prototype.resolve=function(e){return ln.resolve(this.base,e)};It.prototype.makeChild=function(e,t){var n=t===void 0?this.path:this.path.concat([t]),i=e.$id||e.id,o=ln.resolve(this.base,i||""),s=new It(e,this.options,n,o,Object.create(this.schemas));return i&&!s.schemas[o]&&(s.schemas[o]=e),s};var pe=H.FORMAT_REGEXPS={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,"uri-reference":/^(((([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:?)?)|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?)?))#(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|(([A-Za-z][+\-.0-9A-Za-z]*)?%[0-9A-Fa-f]{2}|[!$&-.0-9;=@_~]|[A-Za-z][+\-.0-9A-Za-z]*[!$&-*,;=@_~])(%[0-9A-Fa-f]{2}|[!$&-.0-9;=@-Z_a-z~])*((([/?](%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?#|[/?])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*)?|([A-Za-z][+\-.0-9A-Za-z]*(:%[0-9A-Fa-f]{2}|:[!$&-.0-;=?-Z_a-z~]|[/?])|\?)(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|([A-Za-z][+\-.0-9A-Za-z]*:)?\/((%[0-9A-Fa-f]{2}|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)(:\d*)?[/?]|[!$&-.0-;=?-Z_a-z~])(%[0-9A-Fa-f]{2}|[!$&-;=?-Z_a-z~])*|\/((%[0-9A-Fa-f]{2}|[!$&-.0-9;=A-Z_a-z~])+(:\d*)?|(\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?:\d*|\[(([Vv][0-9A-Fa-f]+\.[!$&-.0-;=A-Z_a-z~]+)?|[.0-:A-Fa-f]+)\])?)?|[A-Za-z][+\-.0-9A-Za-z]*:?)?$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(r){return typeof r=="string"&&parseFloat(r)===parseInt(r,10)&&!isNaN(r)},regex:function(r){var e=!0;try{new RegExp(r)}catch{e=!1}return e},style:/\s*(.+?):\s*([^;]+);?/,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};pe.regexp=pe.regex;pe.pattern=pe.regex;pe.ipv4=pe["ip-address"];H.isFormat=function(e,t,n){if(typeof e=="string"&&pe[t]!==void 0){if(pe[t]instanceof RegExp)return pe[t].test(e);if(typeof pe[t]=="function")return pe[t](e)}else if(n&&n.customFormats&&typeof n.customFormats[t]=="function")return n.customFormats[t](e);return!0};var un=H.makeSuffix=function(e){return e=e.toString(),!e.match(/[.\s\[\]]/)&&!e.match(/^[\d]/)?"."+e:e.match(/^\d+$/)?"["+e+"]":"["+JSON.stringify(e)+"]"};H.deepCompareStrict=function r(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e))return!Array.isArray(t)||e.length!==t.length?!1:e.every(function(o,s){return r(e[s],t[s])});if(typeof e=="object"){if(!e||!t)return e===t;var n=Object.keys(e),i=Object.keys(t);return n.length!==i.length?!1:n.every(function(o){return r(e[o],t[o])})}return e===t};function Co(r,e,t,n){typeof t=="object"?e[n]=Ut(r[n],t):r.indexOf(t)===-1&&e.push(t)}function $o(r,e,t){e[t]=r[t]}function Mo(r,e,t,n){typeof e[n]!="object"||!e[n]?t[n]=e[n]:r[n]?t[n]=Ut(r[n],e[n]):t[n]=e[n]}function Ut(r,e){var t=Array.isArray(e),n=t&&[]||{};return t?(r=r||[],n=n.concat(r),e.forEach(Co.bind(null,r,n))):(r&&typeof r=="object"&&Object.keys(r).forEach($o.bind(null,r,n)),Object.keys(e).forEach(Mo.bind(null,r,e,n))),n}H.deepMerge=Ut;H.objectGetPath=function(e,t){for(var n=t.split("/").slice(1),i;typeof(i=n.shift())=="string";){var o=decodeURIComponent(i.replace(/~0/,"~").replace(/~1/g,"/"));if(!(o in e))return;e=e[o]}return e};function To(r){return"/"+encodeURIComponent(r).replace(/~/g,"%7E")}H.encodePath=function(e){return e.map(To).join("")};H.getDecimalPlaces=function(e){var t=0;if(isNaN(e))return t;typeof e!="number"&&(e=Number(e));var n=e.toString().split("e");if(n.length===2){if(n[1][0]!=="-")return t;t=Number(n[1].slice(1))}var i=n[0].split(".");return i.length===2&&(t+=i[1].length),t};H.isSchema=function(e){return typeof e=="object"&&e||typeof e=="boolean"};var ue=H,I=ue.ValidatorResult,Oe=ue.SchemaError,Yt={};Yt.ignoreProperties={id:!0,default:!0,description:!0,title:!0,additionalItems:!0,then:!0,else:!0,$schema:!0,$ref:!0,extends:!0};var z=Yt.validators={};z.type=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i),s=Array.isArray(t.type)?t.type:[t.type];if(!s.some(this.testType.bind(this,e,t,n,i))){var a=s.map(function(u){if(u){var l=u.$id||u.id;return l?"<"+l+">":u+""}});o.addError({name:"type",argument:a,message:"is not of a type(s) "+a})}return o};function Jt(r,e,t,n,i){var o=e.throwError,s=e.throwAll;e.throwError=!1,e.throwAll=!1;var a=this.validateSchema(r,i,e,t);return e.throwError=o,e.throwAll=s,!a.valid&&n instanceof Function&&n(a),a.valid}z.anyOf=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i),s=new I(e,t,n,i);if(!Array.isArray(t.anyOf))throw new Oe("anyOf must be an array");if(!t.anyOf.some(Jt.bind(this,e,n,i,function(u){s.importErrors(u)}))){var a=t.anyOf.map(function(u,l){var c=u.$id||u.id;return c?"<"+c+">":u.title&&JSON.stringify(u.title)||u.$ref&&"<"+u.$ref+">"||"[subschema "+l+"]"});n.nestedErrors&&o.importErrors(s),o.addError({name:"anyOf",argument:a,message:"is not any of "+a.join(",")})}return o};z.allOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.allOf))throw new Oe("allOf must be an array");var o=new I(e,t,n,i),s=this;return t.allOf.forEach(function(a,u){var l=s.validateSchema(e,a,n,i);if(!l.valid){var c=a.$id||a.id,d=c||a.title&&JSON.stringify(a.title)||a.$ref&&"<"+a.$ref+">"||"[subschema "+u+"]";o.addError({name:"allOf",argument:{id:d,length:l.errors.length,valid:l},message:"does not match allOf schema "+d+" with "+l.errors.length+" error[s]:"}),o.importErrors(l)}}),o};z.oneOf=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.oneOf))throw new Oe("oneOf must be an array");var o=new I(e,t,n,i),s=new I(e,t,n,i),a=t.oneOf.filter(Jt.bind(this,e,n,i,function(l){s.importErrors(l)})).length,u=t.oneOf.map(function(l,c){var d=l.$id||l.id;return d||l.title&&JSON.stringify(l.title)||l.$ref&&"<"+l.$ref+">"||"[subschema "+c+"]"});return a!==1&&(n.nestedErrors&&o.importErrors(s),o.addError({name:"oneOf",argument:u,message:"is not exactly one from "+u.join(",")})),o};z.if=function(e,t,n,i){if(e===void 0)return null;if(!ue.isSchema(t.if))throw new Error('Expected "if" keyword to be a schema');var o=Jt.call(this,e,n,i,null,t.if),s=new I(e,t,n,i),a;if(o){if(t.then===void 0)return;if(!ue.isSchema(t.then))throw new Error('Expected "then" keyword to be a schema');a=this.validateSchema(e,t.then,n,i.makeChild(t.then)),s.importErrors(a)}else{if(t.else===void 0)return;if(!ue.isSchema(t.else))throw new Error('Expected "else" keyword to be a schema');a=this.validateSchema(e,t.else,n,i.makeChild(t.else)),s.importErrors(a)}return s};function Xt(r,e){if(Object.hasOwnProperty.call(r,e))return r[e];if(e in r){for(;r=Object.getPrototypeOf(r);)if(Object.propertyIsEnumerable.call(r,e))return r[e]}}z.propertyNames=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.propertyNames!==void 0?t.propertyNames:{};if(!ue.isSchema(s))throw new Oe('Expected "propertyNames" to be a schema (object or boolean)');for(var a in e)if(Xt(e,a)!==void 0){var u=this.validateSchema(a,s,n,i.makeChild(s));o.importErrors(u)}return o}};z.properties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.properties||{};for(var a in s){var u=s[a];if(u!==void 0){if(u===null)throw new Oe('Unexpected null, expected schema in "properties"');typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,u,n,i);var l=Xt(e,a),c=this.validateSchema(l,u,n,i.makeChild(u,a));c.instance!==o.instance[a]&&(o.instance[a]=c.instance),o.importErrors(c)}}return o}};function cn(r,e,t,n,i,o){if(this.types.object(r)&&!(e.properties&&e.properties[i]!==void 0))if(e.additionalProperties===!1)o.addError({name:"additionalProperties",argument:i,message:"is not allowed to have the additional property "+JSON.stringify(i)});else{var s=e.additionalProperties||{};typeof t.preValidateProperty=="function"&&t.preValidateProperty(r,i,s,t,n);var a=this.validateSchema(r[i],s,t,n.makeChild(s,i));a.instance!==o.instance[i]&&(o.instance[i]=a.instance),o.importErrors(a)}}z.patternProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=t.patternProperties||{};for(var a in e){var u=!0;for(var l in s){var c=s[l];if(c!==void 0){if(c===null)throw new Oe('Unexpected null, expected schema in "patternProperties"');try{var d=new RegExp(l,"u")}catch{d=new RegExp(l)}if(d.test(a)){u=!1,typeof n.preValidateProperty=="function"&&n.preValidateProperty(e,a,c,n,i);var h=this.validateSchema(e[a],c,n,i.makeChild(c,a));h.instance!==o.instance[a]&&(o.instance[a]=h.instance),o.importErrors(h)}}}u&&cn.call(this,e,t,n,i,a,o)}return o}};z.additionalProperties=function(e,t,n,i){if(this.types.object(e)){if(t.patternProperties)return null;var o=new I(e,t,n,i);for(var s in e)cn.call(this,e,t,n,i,s,o);return o}};z.minProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=Object.keys(e);return s.length>=t.minProperties||o.addError({name:"minProperties",argument:t.minProperties,message:"does not meet minimum property length of "+t.minProperties}),o}};z.maxProperties=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i),s=Object.keys(e);return s.length<=t.maxProperties||o.addError({name:"maxProperties",argument:t.maxProperties,message:"does not meet maximum property length of "+t.maxProperties}),o}};z.items=function(e,t,n,i){var o=this;if(this.types.array(e)&&t.items){var s=new I(e,t,n,i);return e.every(function(a,u){var l=Array.isArray(t.items)?t.items[u]||t.additionalItems:t.items;if(l===void 0)return!0;if(l===!1)return s.addError({name:"items",message:"additionalItems not permitted"}),!1;var c=o.validateSchema(a,l,n,i.makeChild(l,u));return c.instance!==s.instance[u]&&(s.instance[u]=c.instance),s.importErrors(c),!0}),s}};z.minimum=function(e,t,n,i){if(this.types.number(e)){var o=new I(e,t,n,i);return t.exclusiveMinimum&&t.exclusiveMinimum===!0?e>t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than "+t.minimum}):e>=t.minimum||o.addError({name:"minimum",argument:t.minimum,message:"must be greater than or equal to "+t.minimum}),o}};z.maximum=function(e,t,n,i){if(this.types.number(e)){var o=new I(e,t,n,i);return t.exclusiveMaximum&&t.exclusiveMaximum===!0?e<t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than "+t.maximum}):e<=t.maximum||o.addError({name:"maximum",argument:t.maximum,message:"must be less than or equal to "+t.maximum}),o}};z.exclusiveMinimum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new I(e,t,n,i),s=e>t.exclusiveMinimum;return s||o.addError({name:"exclusiveMinimum",argument:t.exclusiveMinimum,message:"must be strictly greater than "+t.exclusiveMinimum}),o}};z.exclusiveMaximum=function(e,t,n,i){if(typeof t.exclusiveMaximum!="boolean"&&this.types.number(e)){var o=new I(e,t,n,i),s=e<t.exclusiveMaximum;return s||o.addError({name:"exclusiveMaximum",argument:t.exclusiveMaximum,message:"must be strictly less than "+t.exclusiveMaximum}),o}};var fn=function(e,t,n,i,o,s){if(this.types.number(e)){var a=t[o];if(a==0)throw new Oe(o+" cannot be zero");var u=new I(e,t,n,i),l=ue.getDecimalPlaces(e),c=ue.getDecimalPlaces(a),d=Math.max(l,c),h=Math.pow(10,d);return Math.round(e*h)%Math.round(a*h)!==0&&u.addError({name:o,argument:a,message:s+JSON.stringify(a)}),u}};z.multipleOf=function(e,t,n,i){return fn.call(this,e,t,n,i,"multipleOf","is not a multiple of (divisible by) ")};z.divisibleBy=function(e,t,n,i){return fn.call(this,e,t,n,i,"divisibleBy","is not divisible by (multiple of) ")};z.required=function(e,t,n,i){var o=new I(e,t,n,i);return e===void 0&&t.required===!0?o.addError({name:"required",message:"is required"}):this.types.object(e)&&Array.isArray(t.required)&&t.required.forEach(function(s){Xt(e,s)===void 0&&o.addError({name:"required",argument:s,message:"requires property "+JSON.stringify(s)})}),o};z.pattern=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=t.pattern;try{var a=new RegExp(s,"u")}catch{a=new RegExp(s)}return e.match(a)||o.addError({name:"pattern",argument:t.pattern,message:"does not match pattern "+JSON.stringify(t.pattern.toString())}),o}};z.format=function(e,t,n,i){if(e!==void 0){var o=new I(e,t,n,i);return!o.disableFormat&&!ue.isFormat(e,t.format,this)&&o.addError({name:"format",argument:t.format,message:"does not conform to the "+JSON.stringify(t.format)+" format"}),o}};z.minLength=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a>=t.minLength||o.addError({name:"minLength",argument:t.minLength,message:"does not meet minimum length of "+t.minLength}),o}};z.maxLength=function(e,t,n,i){if(this.types.string(e)){var o=new I(e,t,n,i),s=e.match(/[\uDC00-\uDFFF]/g),a=e.length-(s?s.length:0);return a<=t.maxLength||o.addError({name:"maxLength",argument:t.maxLength,message:"does not meet maximum length of "+t.maxLength}),o}};z.minItems=function(e,t,n,i){if(this.types.array(e)){var o=new I(e,t,n,i);return e.length>=t.minItems||o.addError({name:"minItems",argument:t.minItems,message:"does not meet minimum length of "+t.minItems}),o}};z.maxItems=function(e,t,n,i){if(this.types.array(e)){var o=new I(e,t,n,i);return e.length<=t.maxItems||o.addError({name:"maxItems",argument:t.maxItems,message:"does not meet maximum length of "+t.maxItems}),o}};function Vo(r,e,t){var n,i=t.length;for(n=e+1,i;n<i;n++)if(ue.deepCompareStrict(r,t[n]))return!1;return!0}z.uniqueItems=function(e,t,n,i){if(t.uniqueItems===!0&&this.types.array(e)){var o=new I(e,t,n,i);return e.every(Vo)||o.addError({name:"uniqueItems",message:"contains duplicate item"}),o}};z.dependencies=function(e,t,n,i){if(this.types.object(e)){var o=new I(e,t,n,i);for(var s in t.dependencies)if(e[s]!==void 0){var a=t.dependencies[s],u=i.makeChild(a,s);if(typeof a=="string"&&(a=[a]),Array.isArray(a))a.forEach(function(c){e[c]===void 0&&o.addError({name:"dependencies",argument:u.propertyPath,message:"property "+c+" not found, required by "+u.propertyPath})});else{var l=this.validateSchema(e,a,n,u);o.instance!==l.instance&&(o.instance=l.instance),l&&l.errors.length&&(o.addError({name:"dependencies",argument:u.propertyPath,message:"does not meet dependency required by "+u.propertyPath}),o.importErrors(l))}}return o}};z.enum=function(e,t,n,i){if(e===void 0)return null;if(!Array.isArray(t.enum))throw new Oe("enum expects an array",t);var o=new I(e,t,n,i);return t.enum.some(ue.deepCompareStrict.bind(null,e))||o.addError({name:"enum",argument:t.enum,message:"is not one of enum values: "+t.enum.map(String).join(",")}),o};z.const=function(e,t,n,i){if(e===void 0)return null;var o=new I(e,t,n,i);return ue.deepCompareStrict(t.const,e)||o.addError({name:"const",argument:t.const,message:"does not exactly match expected constant: "+t.const}),o};z.not=z.disallow=function(e,t,n,i){var o=this;if(e===void 0)return null;var s=new I(e,t,n,i),a=t.not||t.disallow;return a?(Array.isArray(a)||(a=[a]),a.forEach(function(u){if(o.testType(e,t,n,i,u)){var l=u&&(u.$id||u.id),c=l||u;s.addError({name:"not",argument:c,message:"is of prohibited type "+c})}}),s):null};var Wo=Yt,Kt={},Fr=Bt,Zo=H;Kt.SchemaScanResult=dn;function dn(r,e){this.id=r,this.ref=e}Kt.scan=function(e,t){function n(u,l){if(!(!l||typeof l!="object")){if(l.$ref){var c=Fr.resolve(u,l.$ref);a[c]=a[c]?a[c]+1:0;return}var d=l.$id||l.id,h=d?Fr.resolve(u,d):u;if(h){if(h.indexOf("#")<0&&(h+="#"),s[h]){if(!Zo.deepCompareStrict(s[h],l))throw new Error("Schema <"+h+"> already exists with different definition");return s[h]}s[h]=l,h[h.length-1]=="#"&&(s[h.substring(0,h.length-1)]=l)}i(h+"/items",Array.isArray(l.items)?l.items:[l.items]),i(h+"/extends",Array.isArray(l.extends)?l.extends:[l.extends]),n(h+"/additionalItems",l.additionalItems),o(h+"/properties",l.properties),n(h+"/additionalProperties",l.additionalProperties),o(h+"/definitions",l.definitions),o(h+"/patternProperties",l.patternProperties),o(h+"/dependencies",l.dependencies),i(h+"/disallow",l.disallow),i(h+"/allOf",l.allOf),i(h+"/anyOf",l.anyOf),i(h+"/oneOf",l.oneOf),n(h+"/not",l.not)}}function i(u,l){if(Array.isArray(l))for(var c=0;c<l.length;c++)n(u+"/"+c,l[c])}function o(u,l){if(!(!l||typeof l!="object"))for(var c in l)n(u+"/"+c,l[c])}var s={},a={};return n(e,t),new dn(s,a)};var hn=Bt,pn=Wo,Ie=H,mn=Kt.scan,vn=Ie.ValidatorResult,Lo=Ie.ValidatorResultError,Qe=Ie.SchemaError,gn=Ie.SchemaContext,yn="/",X=function r(){this.customFormats=Object.create(r.prototype.customFormats),this.schemas={},this.unresolvedRefs=[],this.types=Object.create(ye),this.attributes=Object.create(pn.validators)};X.prototype.customFormats={};X.prototype.schemas=null;X.prototype.types=null;X.prototype.attributes=null;X.prototype.unresolvedRefs=null;X.prototype.addSchema=function(e,t){var n=this;if(!e)return null;var i=mn(t||yn,e),o=t||e.$id||e.id;for(var s in i.id)this.schemas[s]=i.id[s];for(var s in i.ref)this.unresolvedRefs.push(s);return this.unresolvedRefs=this.unresolvedRefs.filter(function(a){return typeof n.schemas[a]>"u"}),this.schemas[o]};X.prototype.addSubSchemaArray=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addSubSchema(e,t[n])};X.prototype.addSubSchemaObject=function(e,t){if(!(!t||typeof t!="object"))for(var n in t)this.addSubSchema(e,t[n])};X.prototype.setSchemas=function(e){this.schemas=e};X.prototype.getSchema=function(e){return this.schemas[e]};X.prototype.validate=function(e,t,n,i){if(typeof t!="boolean"&&typeof t!="object"||t===null)throw new Qe("Expected `schema` to be an object or boolean");n||(n={});var o=t.$id||t.id,s=hn.resolve(n.base||yn,o||"");if(!i){i=new gn(t,n,[],s,Object.create(this.schemas)),i.schemas[s]||(i.schemas[s]=t);var a=mn(s,t);for(var u in a.id){var l=a.id[u];i.schemas[u]=l}}if(n.required&&e===void 0){var c=new vn(e,t,n,i);return c.addError("is required, but is undefined"),c}var c=this.validateSchema(e,t,n,i);if(c){if(n.throwAll&&c.errors.length)throw new Lo(c)}else throw new Error("Result undefined");return c};function wn(r){var e=typeof r=="string"?r:r.$ref;return typeof e=="string"?e:!1}X.prototype.validateSchema=function(e,t,n,i){var o=new vn(e,t,n,i);if(typeof t=="boolean")t===!0?t={}:t===!1&&(t={type:[]});else if(!t)throw new Error("schema is undefined");if(t.extends)if(Array.isArray(t.extends)){var s={schema:t,ctx:i};t.extends.forEach(this.schemaTraverser.bind(this,s)),t=s.schema,s.schema=null,s.ctx=null,s=null}else t=Ie.deepMerge(t,this.superResolve(t.extends,i));var a=wn(t);if(a){var u=this.resolve(t,a,i),l=new gn(u.subschema,n,i.path,u.switchSchema,i.schemas);return this.validateSchema(e,u.subschema,n,l)}var c=n&&n.skipAttributes||[];for(var d in t)if(!pn.ignoreProperties[d]&&c.indexOf(d)<0){var h=null,f=this.attributes[d];if(f)h=f.call(this,e,t,n,i);else if(n.allowUnknownAttributes===!1)throw new Qe("Unsupported attribute: "+d,t);h&&o.importErrors(h)}if(typeof n.rewrite=="function"){var m=n.rewrite.call(this,e,t,n,i);o.instance=m}return o};X.prototype.schemaTraverser=function(e,t){e.schema=Ie.deepMerge(e.schema,this.superResolve(t,e.ctx))};X.prototype.superResolve=function(e,t){var n=wn(e);return n?this.resolve(e,n,t).subschema:e};X.prototype.resolve=function(e,t,n){if(t=n.resolve(t),n.schemas[t])return{subschema:n.schemas[t],switchSchema:t};var i=hn.parse(t),o=i&&i.hash,s=o&&o.length&&t.substr(0,t.length-o.length);if(!s||!n.schemas[s])throw new Qe("no such schema <"+t+">",e);var a=Ie.objectGetPath(n.schemas[s],o.substr(1));if(a===void 0)throw new Qe("no such schema "+o+" located in <"+s+">",e);return{subschema:a,switchSchema:t}};X.prototype.testType=function(e,t,n,i,o){if(o!==void 0){if(o===null)throw new Qe('Unexpected null in "type" keyword');if(typeof this.types[o]=="function")return this.types[o].call(this,e);if(o&&typeof o=="object"){var s=this.validateSchema(e,o,n,i);return s===void 0||!(s&&s.errors.length)}return!0}};var ye=X.prototype.types={};ye.string=function(e){return typeof e=="string"};ye.number=function(e){return typeof e=="number"&&isFinite(e)};ye.integer=function(e){return typeof e=="number"&&e%1===0};ye.boolean=function(e){return typeof e=="boolean"};ye.array=function(e){return Array.isArray(e)};ye.null=function(e){return e===null};ye.date=function(e){return e instanceof Date};ye.any=function(e){return!0};ye.object=function(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof Date)};var qo=X,Bo=qo,Uo=function(r,e,t){var n=new Bo;return n.validate(r,e,t)},xt="^[a-zA-Z0-9_.-]*$",Yo={type:"object",id:"/CreateFsPropsSchema",properties:{databaseName:{minLength:4,maxLength:50,type:"string",pattern:xt},objectStoreName:{minLength:1,maxLength:20,type:"string",pattern:xt},rootDirectoryName:{minLength:1,maxLength:20,type:"string",pattern:xt},databaseVersion:{minimum:1,maximum:100,type:"integer"}},required:["databaseName","databaseVersion","objectStoreName","rootDirectoryName"]};function Jo(r){var e=Uo(r,Yo),t=e.valid,n=e.errors;if(t)return t;var i=JSON.stringify(n);throw new Error(`Props passed to createFS function are invalid:
`+i)}function Xo(r,e){if(!Ve(r)||!Ve(e)||e==="")return!1;var t=e+"/";return r.startsWith(t)}function Ko(r,e){if(r==="")return e;var t=Xo(r,e);if(!t){var n=Xi(r);return""+e+(n?"":"/")+r}return r}function J(r,e){if(!Ve(e)||e==="")throw new Error("rootDirectoryName parameter was not provided");if(!Ve(r))throw new Error("fullPath parameter was not provided");if(r===e)return e;var t=Ko(r,e);if(!t||!Ji(t))throw new Error('"'+r+'" path is invalid.');return t}var Go=function(r){var e=r.result;return Boolean(e==null?void 0:e.createdAt)},Ho=function(r){var e=r.getRecord,t=r.rootDirectoryName;return function(n){return M(void 0,void 0,void 0,function(){var i;return $(this,function(o){return i=J(n,t),[2,e(i,Go)]})})}},Qo=function(r){var e=r.exists,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file or directory does not exist.');return[2,t(o)]}})})}},es=function(r){var e=r.exists,t=r.isFile,n=r.isDirectory,i=r.fileDetails,o=r.directoryDetails,s=r.rootDirectoryName;return function(a){return M(void 0,void 0,void 0,function(){var u,l,c,d;return $(this,function(h){switch(h.label){case 0:return u=J(a,s),[4,e(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" file or directory does not exist.');return[4,t(u)];case 2:return c=h.sent(),[4,n(u)];case 3:if(d=h.sent(),c&&d)throw new Error('"'+u+'" is a path of file and directory.');return c?[2,i(u)]:[2,o(u)]}})})}},Ee;(function(r){r.FILE="file",r.DIRECTORY="directory"})(Ee||(Ee={}));var ts=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===Ee.FILE)},rs=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" file does not exist.');return[2,t(o,ts)]}})})}},ns=function(r){var e=r.isFile,t=r.exists,n=r.writeFile,i=r.isDirectory,o=r.fileDetails,s=r.rootDirectoryName;return function(a,u){return M(void 0,void 0,void 0,function(){var l,c,d,h,f,m,y;return $(this,function(_){switch(_.label){case 0:return l=J(a,s),c=J(u,s),[4,e(l)];case 1:if(d=_.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=We(c,s),[4,i(h)];case 2:if(f=_.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(m=_.sent(),m)throw new Error('"'+c+'" is already taken.');return[4,o(l)];case 4:return y=_.sent(),[2,n(c,y.data)]}})})}},is=function(r){var e=r.fileDetails;return function(t){return M(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e(t)];case 1:return n=i.sent(),[2,n.data]}})})}},os=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.isDirectory,o=r.updateFileDetails,s=r.rootDirectoryName;return function(a,u){return M(void 0,void 0,void 0,function(){var l,c,d,h,f,m,y,_;return $(this,function(w){switch(w.label){case 0:return l=J(a,s),c=J(u,s),[4,e(l)];case 1:if(d=w.sent(),!d)throw new Error('"'+l+'" source is not a file.');return h=We(c,s),[4,i(h)];case 2:if(f=w.sent(),!f)throw new Error('"'+h+'" destination directory does not exist.');return[4,t(c)];case 3:if(m=w.sent(),m)throw new Error('"'+c+'" is already taken.');return y=gt.basename(c),[4,o(l,{name:y,directory:h,fullPath:c})];case 4:return _=w.sent(),[4,n(l)];case 5:return w.sent(),[2,_]}})})}},ss=function(r){var e=r.putRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i,o){return M(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return $(this,function(h){switch(h.label){case 0:if(s=J(i,n),s===n)throw new Error('Root directory: "'+s+'" cannot be a file.');return a=gt.basename(s),u=We(s,n),[4,t(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" directory does not exist.');return[4,He(function(){return t(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a file with the same name as the directory.');return d={data:o,directory:u,name:a,type:Ee.FILE,createdAt:Date.now(),fullPath:s},[2,e(d)]}})})}},as=function(r){var e=r.isFile,t=r.exists,n=r.removeFile,i=r.updateFileDetails,o=r.rootDirectoryName;return function(s,a){return M(void 0,void 0,void 0,function(){var u,l,c,d,h,f;return $(this,function(m){switch(m.label){case 0:return u=J(s,o),[4,e(u)];case 1:if(l=m.sent(),!l)throw new Error('"'+u+'" is not a file.');return c=We(u,o),d=c+"/"+a,[4,t(d)];case 2:if(h=m.sent(),h)throw new Error('"'+d+'" is already taken.');return[4,i(u,{name:a,fullPath:d})];case 3:return f=m.sent(),[4,n(u)];case 4:return m.sent(),[2,f]}})})}},ls=function(r){var e=r.isFile,t=r.deleteRecord,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o)]}})})}},us=function(r){var e=r.result;return Boolean((e==null?void 0:e.type)===Ee.DIRECTORY)},cs=function(r){var e=r.exists,t=r.getRecord,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" directory does not exist.');return[2,t(o,us)]}})})}},fs=function(r){var e=r.result;return e},ds=function(r){var e=r.isFile,t=r.getRecord,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,e(o)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a file.');return[2,t(o,fs)]}})})}},hs=function(r){var e=r.openCursor,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s,a,u,l;return $(this,function(c){switch(c.label){case 0:return o=J(i,n),[4,t(i)];case 1:if(s=c.sent(),!s)throw new Error('"'+o+'" is not a directory.');return a=[],u=[],l=function(d,h){var f=d.result;if(f){var m=f.value;if(m.type===Ee.FILE){m.data;var y=Ui(m,["data"]);a.push(y)}else m.type===Ee.DIRECTORY&&!m.isRoot&&u.push(m);f.continue()}else{var _=a.length,w=u.length,v=_===0&&w===0;h({isEmpty:v,filesCount:_,directoriesCount:w,files:a,directories:u})}},[2,e(o,l)]}})})}},ps=function(r){var e=r.isFile,t=r.putRecord,n=r.isDirectory,i=r.rootDirectoryName;return function(o){return M(void 0,void 0,void 0,function(){var s,a,u,l,c,d;return $(this,function(h){switch(h.label){case 0:if(s=J(o,i),s===i)throw new Error('Root directory: "'+s+'" already exist.');return a=gt.basename(s),u=We(s,i),[4,n(u)];case 1:if(l=h.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,He(function(){return e(s)},function(){return!1})];case 2:if(c=h.sent(),c)throw new Error('"'+s+'" you cannot create a directory with the same name as the file.');return d={directory:u,isRoot:!1,name:a,createdAt:Date.now(),type:Ee.DIRECTORY,fullPath:s},[2,t(d)]}})})}},ms=function(r){var e=r.remove,t=r.isDirectory,n=r.readDirectory,i=r.rootDirectoryName;function o(s){return M(this,void 0,void 0,function(){var a,u,l,c,d,h,f,m,y,_,w,v,p;return $(this,function(S){switch(S.label){case 0:return a=J(s,i),[4,n(a)];case 1:if(u=S.sent(),l=u.files,c=u.filesCount,d=u.directories,h=u.directoriesCount,!(c>0))return[3,5];f=0,m=l,S.label=2;case 2:return f<m.length?(y=m[f],[4,e(y.fullPath)]):[3,5];case 3:S.sent(),S.label=4;case 4:return f++,[3,2];case 5:return h?[3,7]:[4,e(s)];case 6:return S.sent(),[2];case 7:_=function(N){return $(this,function(x){switch(x.label){case 0:return N.isRoot?[3,2]:[4,o(N.fullPath)];case 1:x.sent(),x.label=2;case 2:return[4,He(function(){return e(N.fullPath)})];case 3:return x.sent(),[2]}})},w=0,v=d,S.label=8;case 8:return w<v.length?(p=v[w],[5,_(p)]):[3,11];case 9:S.sent(),S.label=10;case 10:return w++,[3,8];case 11:return[2]}})})}return function(a){return M(this,void 0,void 0,function(){var u;return $(this,function(l){switch(l.label){case 0:return[4,t(a)];case 1:if(u=l.sent(),!u)throw new Error('"'+a+'" is not a directory.');return[4,o(a)];case 2:return l.sent(),a===i?[3,4]:[4,He(function(){return e(a)})];case 3:l.sent(),l.label=4;case 4:return[2]}})})}},vs=function(r){var e=r.result;return e},gs=function(r){var e=r.getRecord,t=r.isDirectory,n=r.rootDirectoryName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return o=J(i,n),[4,t(i)];case 1:if(s=a.sent(),!s)throw new Error('"'+o+'" is not a directory.');return[2,e(o,vs)]}})})}},ys=function(r){var e=r.putRecord,t=r.isDirectory,n=r.fileDetails,i=r.rootDirectoryName;return function(o,s){return M(void 0,void 0,void 0,function(){var a,u,l,c,d,h;return $(this,function(f){switch(f.label){case 0:if(a=J(o,i),a===i)throw new Error('Root directory: "'+a+'" cannot be updated.');return u=We(a,i),[4,t(u)];case 1:if(l=f.sent(),!l)throw new Error('"'+u+'" is not a directory.');return[4,He(function(){return t(a)},function(){return!1})];case 2:if(c=f.sent(),c)throw new Error('"'+a+'" you cannot update a directory.');return[4,n(a)];case 3:return d=f.sent(),h=dt(dt({},d),s),[2,e(h)]}})})}},ws=function(r){var e=r.putRecord,t=r.rootDirectoryName;return function(){return M(void 0,void 0,void 0,function(){var n;return $(this,function(i){return n={isRoot:!0,createdAt:Date.now(),name:t,type:Ee.DIRECTORY,fullPath:t,directory:t},[2,e(n)]})})}},bs=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName,i=Os({databaseName:e,databaseVersion:t,objectStoreName:n}),o=Fs({initializeObjectStore:i}),s=Es({initializeObjectStore:i}),a=xs({initializeObjectStore:i}),u=Ss({initializeObjectStore:i});return{getRecord:o,putRecord:s,openCursor:a,deleteRecord:u}},_s="fullPath",zt="directory";function xr(r){if(!r)return null;var e=r;return e.result}function Sr(r,e){e||r(new Error("Something went wrong and the database transaction was not opened."))}var Ds=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return new Promise(function(i,o){var s=ks(e,t);s.onerror=o,s.onsuccess=function(a){var u=a.target,l=xr(u);Sr(o,l),i(l)},s.onupgradeneeded=function(a){var u=a.target,l=xr(u);Sr(o,l);var c=l.createObjectStore(n,{keyPath:_s});c.createIndex(zt,zt,{unique:!1})}})},As=function(){return Boolean(indexedDB)},Es=function(r){var e=r.initializeObjectStore;return function(t){return M(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.put(t);a.onerror=s,a.onsuccess=function(){return o(t)}})]}})})}},Fs=function(r){var e=r.initializeObjectStore;return function(t,n){return M(void 0,void 0,void 0,function(){var i;return $(this,function(o){switch(o.label){case 0:return[4,e("readonly")];case 1:return i=o.sent(),[2,new Promise(function(s,a){var u=i.get(t);u.onerror=a,u.onsuccess=function(l){return s(n(l==null?void 0:l.target))}})]}})})}},xs=function(r){var e=r.initializeObjectStore;return function(t,n){return M(void 0,void 0,void 0,function(){var i,o,s,a;return $(this,function(u){switch(u.label){case 0:return[4,e("readonly")];case 1:return i=u.sent(),o=i.index(zt),s=IDBKeyRange.only(t),a=o.openCursor(s),[2,new Promise(function(l,c){a.onerror=c,a.onsuccess=function(d){var h=d.target;return n(h,l)}})]}})})}},Ss=function(r){var e=r.initializeObjectStore;return function(t){return M(void 0,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return[4,e("readwrite")];case 1:return n=i.sent(),[2,new Promise(function(o,s){var a=n.delete(t);a.onerror=s,a.onsuccess=function(){return o()}})]}})})}},ks=function(r,e){return indexedDB.open(r,e)},Os=function(r){var e=r.databaseName,t=r.databaseVersion,n=r.objectStoreName;return function(i){return M(void 0,void 0,void 0,function(){var o,s;return $(this,function(a){switch(a.label){case 0:return[4,Ds({databaseName:e,databaseVersion:t,objectStoreName:n})];case 1:return o=a.sent(),s=o.transaction(n,i),[2,s.objectStore(n)]}})})}},Be={databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"indexeddb-fs"};function bn(r){var e=this,t=r===void 0?Be:r,n=t.databaseName,i=n===void 0?Be.databaseName:n,o=t.databaseVersion,s=o===void 0?Be.databaseVersion:o,a=t.objectStoreName,u=a===void 0?Be.objectStoreName:a,l=t.rootDirectoryName,c=l===void 0?Be.rootDirectoryName:l;function d(){h(),f()}function h(){if(!As())throw new Error("Your browser does not support indexedDB.")}function f(){Jo({databaseName:i,objectStoreName:u,databaseVersion:s,rootDirectoryName:c})}var m=bs({databaseName:i,databaseVersion:s,objectStoreName:u}),y=m.getRecord,_=m.putRecord,w=m.openCursor,v=m.deleteRecord,p=Ho({getRecord:y,rootDirectoryName:c}),S=rs({exists:p,getRecord:y,rootDirectoryName:c}),N=Qo({exists:p,deleteRecord:v,rootDirectoryName:c}),x=ds({isFile:S,getRecord:y,rootDirectoryName:c}),F=is({fileDetails:x}),b=ls({isFile:S,deleteRecord:v,rootDirectoryName:c}),O=cs({exists:p,getRecord:y,rootDirectoryName:c}),W=ss({putRecord:_,isDirectory:O,rootDirectoryName:c}),K=ns({exists:p,isFile:S,writeFile:W,fileDetails:x,isDirectory:O,rootDirectoryName:c}),G=hs({openCursor:w,isDirectory:O,rootDirectoryName:c}),we=ps({isFile:S,putRecord:_,isDirectory:O,rootDirectoryName:c}),ve=ms({remove:N,isDirectory:O,readDirectory:G,rootDirectoryName:c}),Fe=gs({getRecord:y,isDirectory:O,rootDirectoryName:c}),de=es({isFile:S,exists:p,isDirectory:O,fileDetails:x,directoryDetails:Fe,rootDirectoryName:c}),ie=ys({putRecord:_,fileDetails:x,isDirectory:O,rootDirectoryName:c}),Ze=os({exists:p,isFile:S,removeFile:b,isDirectory:O,updateFileDetails:ie,rootDirectoryName:c}),wt=as({exists:p,isFile:S,removeFile:b,updateFileDetails:ie,rootDirectoryName:c}),bt=ws({putRecord:_,rootDirectoryName:c});function _t(){return M(this,void 0,void 0,function(){var R;return $(this,function(L){switch(L.label){case 0:return[4,p(c)];case 1:return R=L.sent(),R?[3,3]:[4,bt()];case 2:L.sent(),L.label=3;case 3:return[2]}})})}var U=function(R){return function(){for(var L=[],xe=0;xe<arguments.length;xe++)L[xe]=arguments[xe];return M(e,void 0,void 0,function(){return $(this,function(be){switch(be.label){case 0:return[4,_t()];case 1:return be.sent(),[2,R.apply(void 0,L)]}})})}};return d(),{databaseName:i,databaseVersion:s,objectStoreName:u,rootDirectoryName:c,exists:U(p),isFile:U(S),remove:U(N),details:U(de),copyFile:U(K),readFile:U(F),moveFile:U(Ze),writeFile:U(W),renameFile:U(wt),removeFile:U(b),fileDetails:U(x),isDirectory:U(O),readDirectory:U(G),createDirectory:U(we),removeDirectory:U(ve),directoryDetails:U(Fe)}}bn();const te=bn({databaseVersion:1,objectStoreName:"files",rootDirectoryName:"root",databaseName:"filesystem"}),Q=r=>{let e=["root",...Vt(r)].join("/");return e.endsWith("/")&&(e=e.substring(0,e.length-1)),e},kr=r=>{const e=r.split("/").reverse();e.pop();let t="/"+e.reverse().join("/");return t.endsWith("/")||(t=t+"/"),t};class Ps{constructor(){A(this,"exists",async e=>await te.exists(Q(e)));A(this,"copy",async(e,t)=>{await te.copyFile(Q(e),Q(t))});A(this,"createFile",async e=>{await te.writeFile(Q(e),"")});A(this,"createFolder",async(e,t)=>{await te.createDirectory(Q(e))});A(this,"getFiles",async e=>{let t=await te.readDirectory(Q(e));t.files.forEach(i=>console.log(i));const n=[...t.files.map(i=>Tt(kr(i.fullPath))),...t.directories.map(i=>ct(kr(i.fullPath)))];return n.forEach(i=>console.log(i)),n});A(this,"getMetadata",async e=>{let t=await te.fileDetails(Q(e));return{lastModified:new Date(t.createdAt),size:async()=>(await te.readFile(Q(e))).byteLength}});A(this,"readBytes",async e=>await te.readFile(Q(e)));A(this,"readObject",async e=>await te.readFile(Q(e)));A(this,"readString",async e=>await te.readFile(Q(e)));A(this,"writeBytes",async(e,t)=>{await te.writeFile(Q(e),t)});A(this,"writeObject",async(e,t)=>{await te.writeFile(Q(e),t)});A(this,"writeString",async(e,t)=>{await te.writeFile(Q(e),t)});A(this,"deleteFile",async e=>te.removeFile(Q(e)));A(this,"deleteFolder",async e=>{await te.removeDirectory(Q(e))})}}const Rs="/assets/welcomeIcon-41410f3b.svg";function Ns(r){let e,t,n,i;const o=r[2].default,s=Ir(o,r,r[1],null);return{c(){e=E("p"),s&&s.c(),g(e,"class","link disabled svelte-1bhc6i1")},m(a,u){P(a,e,u),s&&s.m(e,null),t=!0,n||(i=V(e,"click",function(){et(r[0])&&r[0].apply(this,arguments)}),n=!0)},p(a,u){r=a,s&&s.p&&(!t||u&2)&&$r(s,o,r,r[1],t?Cr(o,r[1],u,null):Mr(r[1]),null)},i(a){t||(Z(s,a),t=!0)},o(a){q(s,a),t=!1},d(a){a&&k(e),s&&s.d(a),n=!1,i()}}}function js(r){let e,t,n,i;const o=r[2].default,s=Ir(o,r,r[1],null);return{c(){e=E("p"),s&&s.c(),g(e,"class","link svelte-1bhc6i1")},m(a,u){P(a,e,u),s&&s.m(e,null),t=!0,n||(i=V(e,"click",function(){et(r[0])&&r[0].apply(this,arguments)}),n=!0)},p(a,u){r=a,s&&s.p&&(!t||u&2)&&$r(s,o,r,r[1],t?Cr(o,r[1],u,null):Mr(r[1]),null)},i(a){t||(Z(s,a),t=!0)},o(a){q(s,a),t=!1},d(a){a&&k(e),s&&s.d(a),n=!1,i()}}}function Is(r){let e,t,n,i;const o=[js,Ns],s=[];function a(u,l){return u[0]!=null?0:1}return e=a(r),t=s[e]=o[e](r),{c(){t.c(),n=ht()},m(u,l){s[e].m(u,l),P(u,n,l),i=!0},p(u,[l]){let c=e;e=a(u),e===c?s[e].p(u,l):(pt(),q(s[c],1,1,()=>{s[c]=null}),mt(),t=s[e],t?t.p(u,l):(t=s[e]=o[e](u),t.c()),Z(t,1),t.m(n.parentNode,n))},i(u){i||(Z(t),i=!0)},o(u){q(t),i=!1},d(u){s[e].d(u),u&&k(n)}}}function zs(r,e,t){let{$$slots:n={},$$scope:i}=e,{onClick:o=void 0}=e;return r.$$set=s=>{"onClick"in s&&t(0,o=s.onClick),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,n]}class Ue extends fe{constructor(e){super(),ce(this,e,zs,Is,ae,{onClick:0})}}function Or(r,e,t){const n=r.slice();return n[15]=e[t],n[17]=t,n}function Pr(r){let e,t=r[15]+"",n,i,o;function s(){return r[5](r[17])}return{c(){e=E("span"),n=B(t)},m(a,u){P(a,e,u),D(e,n),i||(o=[V(e,"mouseenter",s),V(e,"mouseleave",r[3])],i=!0)},p(a,u){r=a,u&2&&t!==(t=r[15]+"")&&Ae(n,t)},d(a){a&&k(e),i=!1,ke(o)}}}function Cs(r){let e,t=r[1],n=[];for(let i=0;i<t.length;i+=1)n[i]=Pr(Or(r,t,i));return{c(){e=E("span");for(let i=0;i<n.length;i+=1)n[i].c();g(e,"class",r[0])},m(i,o){P(i,e,o);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,[o]){if(o&14){t=i[1];let s;for(s=0;s<t.length;s+=1){const a=Or(i,t,s);n[s]?n[s].p(a,o):(n[s]=Pr(a),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}o&1&&g(e,"class",i[0])},i:C,o:C,d(i){i&&k(e),Nn(n,i)}}}function $s(r,e,t){let{className:n="text-4xl pt-4 pb-4 pl-2 pr-2"}=e,{value:i}=e;const o=i,s="abcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()-=[];',./".split("");let a=o.split(""),u,l,c=[];const d=()=>{c.forEach(v=>window.clearInterval(v))},h=()=>{for(let[v,p]of a.entries())c[v]=window.setInterval(()=>{if(a[v]==o.split("")[v]){window.clearInterval(c[v]);return}let S=y(p)??s[0];t(1,a[v]=S,a),p=S},20+Math.random()*10)},f=v=>{d(),u=window.setInterval(()=>{m(v),t(4,i=a.join(""))},3),window.clearTimeout(l),l=void 0},m=v=>{let p=y(a[v]);if(p==null){t(1,a[v]=s[0],a),v!=0&&m(v-1);return}t(1,a[v]=p,a)},y=v=>{if(v==null)return;let p=s.findIndex(S=>S==v)+1;return s[p]},_=()=>{window.clearInterval(u),u=void 0,l=window.setTimeout(h,2e3)},w=v=>{f(v)};return r.$$set=v=>{"className"in v&&t(0,n=v.className),"value"in v&&t(4,i=v.value)},[n,a,f,_,i,w]}class Ms extends fe{constructor(e){super(),ce(this,e,$s,Cs,ae,{className:0,value:4})}}function Ts(r){let e;return{c(){e=B("about me")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Vs(r){let e;return{c(){e=B("projects")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Ws(r){let e;return{c(){e=B("???")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Zs(r){let e;return{c(){e=B("friends")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function Ls(r){let e;return{c(){e=B("links")},m(t,n){P(t,e,n)},d(t){t&&k(e)}}}function qs(r){let e,t,n,i,o,s,a,u,l,c,d,h,f,m,y,_,w,v,p,S,N,x;return o=new Ms({props:{value:"welcome"}}),f=new Ue({props:{$$slots:{default:[Ts]},$$scope:{ctx:r}}}),y=new Ue({props:{$$slots:{default:[Vs]},$$scope:{ctx:r}}}),w=new Ue({props:{$$slots:{default:[Ws]},$$scope:{ctx:r}}}),p=new Ue({props:{$$slots:{default:[Zs]},$$scope:{ctx:r}}}),N=new Ue({props:{$$slots:{default:[Ls]},$$scope:{ctx:r}}}),{c(){e=E("div"),t=E("div"),n=E("span"),n.textContent="-------[",i=j(),le(o.$$.fragment),s=j(),a=E("span"),a.textContent="]-------",u=j(),l=E("div"),l.innerHTML='<hr class="w-full border-gray-700"/>',c=j(),d=E("div"),h=E("div"),le(f.$$.fragment),m=j(),le(y.$$.fragment),_=j(),le(w.$$.fragment),v=j(),le(p.$$.fragment),S=j(),le(N.$$.fragment),g(n,"class","grayed-out left text-4xl pt-4 pb-4 svelte-lvdier"),g(a,"class","grayed-out right text-4xl pt-4 pb-4 svelte-lvdier"),g(t,"class","h-center welcome-header"),g(e,"class","bg-gray-800 border-b-gray-700 pt-2 pb-2 drop-shadow-2xl"),g(l,"class","h-center"),g(h,"class","text-center"),g(d,"class","pt-6 options h-center")},m(F,b){P(F,e,b),D(e,t),D(t,n),D(t,i),oe(o,t,null),D(t,s),D(t,a),P(F,u,b),P(F,l,b),P(F,c,b),P(F,d,b),D(d,h),oe(f,h,null),D(h,m),oe(y,h,null),D(h,_),oe(w,h,null),D(h,v),oe(p,h,null),D(h,S),oe(N,h,null),x=!0},p(F,[b]){const O={};b&8&&(O.$$scope={dirty:b,ctx:F}),f.$set(O);const W={};b&8&&(W.$$scope={dirty:b,ctx:F}),y.$set(W);const K={};b&8&&(K.$$scope={dirty:b,ctx:F}),w.$set(K);const G={};b&8&&(G.$$scope={dirty:b,ctx:F}),p.$set(G);const we={};b&8&&(we.$$scope={dirty:b,ctx:F}),N.$set(we)},i(F){x||(Z(o.$$.fragment,F),Z(f.$$.fragment,F),Z(y.$$.fragment,F),Z(w.$$.fragment,F),Z(p.$$.fragment,F),Z(N.$$.fragment,F),x=!0)},o(F){q(o.$$.fragment,F),q(f.$$.fragment,F),q(y.$$.fragment,F),q(w.$$.fragment,F),q(p.$$.fragment,F),q(N.$$.fragment,F),x=!1},d(F){F&&k(e),se(o),F&&k(u),F&&k(l),F&&k(c),F&&k(d),se(f),se(y),se(w),se(p),se(N)}}}function Bs(r,e,t){let{process:n}=e,{window:i}=e;return i.icon=n.app.icon,i.classes="bg-gray-800",i.width=600,i.height=310,i.controlButtons={close:!1,minimize:!0,maximize:!1},r.$$set=o=>{"process"in o&&t(1,n=o.process),"window"in o&&t(0,i=o.window)},[i,n]}class Us extends fe{constructor(e){super(),ce(this,e,Bs,qs,ae,{process:1,window:0})}}class _n extends ne{constructor(){super("Welcome!",Us,Rs)}}new Ai({target:document.getElementById("app")});try{Ni(new Ps)}catch(r){console.error("Unable to initialize filesystem.",r)}ne.registerApp(new vt);ne.registerApp(new Xr);ne.registerApp(new _n);document.addEventListener("keydown",r=>{r.ctrlKey==!0&&r.altKey==!0&&r.key=="d"&&ge.spawn(vt,{backgroundColor:"#1a1d1e"})});ge.spawn(_n);
