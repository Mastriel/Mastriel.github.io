var st=Object.defineProperty;var it=(t,e,n)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var w=(t,e,n)=>(it(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function O(){}function Fe(t){return t()}function Ae(){return Object.create(null)}function ne(t){t.forEach(Fe)}function Ze(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _e;function Be(t,e){return _e||(_e=document.createElement("a")),_e.href=e,t===_e.href}function ot(t){return Object.keys(t).length===0}function He(t,...e){if(t==null)return O;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function U(t){let e;return He(t,n=>e=n)(),e}function $(t,e,n){t.$$.on_destroy.push(He(e,n))}function Me(t){return t??""}function p(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function pe(t){return document.createTextNode(t)}function L(){return pe(" ")}function Ke(){return pe("")}function Y(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function rt(t){return Array.from(t.childNodes)}function Le(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function M(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Ie(t,e){return new t(e)}let fe;function ue(t){fe=t}function lt(){if(!fe)throw new Error("Function called outside component initialization");return fe}function Ge(t){lt().$$.on_mount.push(t)}const ce=[],Se=[],ve=[],Oe=[],ct=Promise.resolve();let ze=!1;function ut(){ze||(ze=!0,ct.then(Je))}function xe(t){ve.push(t)}const We=new Set;let be=0;function Je(){const t=fe;do{for(;be<ce.length;){const e=ce[be];be++,ue(e),ft(e.$$)}for(ue(null),ce.length=0,be=0;Se.length;)Se.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];We.has(n)||(We.add(n),n())}ve.length=0}while(ce.length);for(;Oe.length;)Oe.pop()();ze=!1,We.clear(),ue(t)}function ft(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xe)}}const ye=new Set;let ee;function Qe(){ee={r:0,c:[],p:ee}}function et(){ee.r||ne(ee.c),ee=ee.p}function te(t,e){t&&t.i&&(ye.delete(t),t.i(e))}function oe(t,e,n,s){if(t&&t.o){if(ye.has(t))return;ye.add(t),ee.c.push(()=>{ye.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function at(t,e){oe(t,1,1,()=>{e.delete(t.key)})}function dt(t,e,n,s,i,o,r,l,f,u,E,_){let k=t.length,c=o.length,a=k;const S={};for(;a--;)S[t[a].key]=a;const z=[],V=new Map,P=new Map;for(a=c;a--;){const m=_(i,o,a),v=n(m);let b=r.get(v);b?s&&b.p(m,e):(b=u(v,m),b.c()),V.set(v,z[a]=b),v in S&&P.set(v,Math.abs(a-S[v]))}const C=new Set,q=new Set;function N(m){te(m,1),m.m(l,E),r.set(m.key,m),E=m.first,c--}for(;k&&c;){const m=z[c-1],v=t[k-1],b=m.key,j=v.key;m===v?(E=m.first,k--,c--):V.has(j)?!r.has(b)||C.has(b)?N(m):q.has(j)?k--:P.get(b)>P.get(j)?(q.add(b),N(m)):(C.add(j),k--):(f(v,r),k--)}for(;k--;){const m=t[k];V.has(m.key)||f(m,r)}for(;c;)N(z[c-1]);return z}function ke(t){t&&t.c()}function ae(t,e,n,s){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),s||xe(()=>{const r=t.$$.on_mount.map(Fe).filter(Ze);t.$$.on_destroy?t.$$.on_destroy.push(...r):ne(r),t.$$.on_mount=[]}),o.forEach(xe)}function de(t,e){const n=t.$$;n.fragment!==null&&(ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(t,e){t.$$.dirty[0]===-1&&(ce.push(t),ut(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,n,s,i,o,r,l=[-1]){const f=fe;ue(t);const u=t.$$={fragment:null,ctx:[],props:o,update:O,not_equal:i,bound:Ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ae(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};r&&r(u.root);let E=!1;if(u.ctx=n?n(t,e.props||{},(_,k,...c)=>{const a=c.length?c[0]:k;return u.ctx&&i(u.ctx[_],u.ctx[_]=a)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](a),E&&pt(t,_)),k}):[],u.update(),E=!0,ne(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const _=rt(e.target);u.fragment&&u.fragment.l(_),_.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&te(t.$$.fragment),ae(t,e.target,e.anchor,e.customElement),Je()}ue(f)}class me{$destroy(){de(this,1),this.$destroy=O}$on(e,n){if(!Ze(n))return O;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!ot(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const se=[];function X(t,e=O){let n;const s=new Set;function i(l){if(re(t,l)&&(t=l,n)){const f=!se.length;for(const u of s)u[1](),se.push(u,t);if(f){for(let u=0;u<se.length;u+=2)se[u][0](se[u+1]);se.length=0}}}function o(l){i(l(t))}function r(l,f=O){const u=[l,f];return s.add(u),s.size===1&&(n=e(i)||O),l(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:r}}function ht(){return{close:!0,minimize:!0,maximize:!1}}class mt{constructor(e,n,s,i){w(this,"stores");this.stores=new wt(e,n,s,i)}get x(){return U(this.stores.x)}set x(e){this.stores.x.set(e)}get y(){return U(this.stores.y)}set y(e){this.stores.y.set(e)}get width(){return U(this.stores.width)}set width(e){this.stores.width.set(e)}get height(){return U(this.stores.height)}set height(e){this.stores.height.set(e)}get title(){return U(this.stores.title)}set title(e){this.stores.title.set(e)}get classes(){return U(this.stores.classes)}set classes(e){this.stores.classes.set(e)}get style(){return U(this.stores.style)}set style(e){this.stores.style.set(e)}get resizable(){return U(this.stores.resizable)}set resizable(e){this.stores.resizable.set(e)}get important(){return U(this.stores.important)}set important(e){this.stores.important.set(e)}get icon(){return U(this.stores.icon)}set icon(e){this.stores.icon.set(e)}get controlButtons(){return U(this.stores.controlButtons)}set controlButtons(e){this.stores.controlButtons.set(e)}}class wt{constructor(e,n,s,i){w(this,"classes",X(""));w(this,"style",X(""));w(this,"title",X());w(this,"icon",X());w(this,"resizable",X(!1));w(this,"important",X(!1));w(this,"controlButtons",X(ht()));w(this,"height");w(this,"width");w(this,"y");w(this,"x");this.x=X(e),this.y=X(n),this.width=X(s),this.height=X(i)}}const K=class extends mt{constructor(n,s,i,o,r){super(n,s,i,o);w(this,"_process");w(this,"_isVisible",!0);this.component=r}static get activeWindow(){return U(this.activeWindowStore)}static set activeWindow(n){this.activeWindowStore.set(n)}static getWindows(){return[...this.windows]}get process(){return this._process}get isAlive(){return this._process!=null}get isActive(){return K.activeWindow==this}get isVisible(){return this._isVisible}set isVisible(n){this._isVisible=n}hide(){this.isVisible=!1}unhide(){this.isVisible=!0}close(){let n=K.windows.filter(s=>s!=this);K.windowsStore.set(n)}};let I=K;w(I,"windowsStore",X([])),w(I,"windows"),w(I,"activeWindowStore",X(void 0)),w(I,"spawn",(n,s)=>(K.windowsStore.set([...K.windows,n]),n._process=s,n.title=n.process.app.name,n)),(()=>{K.windowsStore.subscribe(n=>{K.windows=n})})();let tt=0;const Pe=()=>tt++,gt=()=>tt;function Ne(t){let e,n,s;return{c(){e=g("img"),Be(e.src,n=t[7])||y(e,"src",n),y(e,"alt",s=t[8]+" icon"),y(e,"height",18),y(e,"width",18),y(e,"class","ml-1.5")},m(i,o){A(i,e,o)},p(i,o){o[0]&128&&!Be(e.src,n=i[7])&&y(e,"src",n),o[0]&256&&s!==(s=i[8]+" icon")&&y(e,"alt",s)},d(i){i&&T(e)}}}function _t(t){let e,n;return{c(){e=g("span"),n=pe(t[8]),y(e,"class","pl-2 text-gray-400")},m(s,i){A(s,e,i),p(e,n)},p(s,i){i[0]&256&&Le(n,s[8])},d(s){s&&T(e)}}}function bt(t){let e,n;return{c(){e=g("span"),n=pe(t[8]),y(e,"class","pl-2")},m(s,i){A(s,e,i),p(e,n)},p(s,i){i[0]&256&&Le(n,s[8])},d(s){s&&T(e)}}}function je(t){let e;return{c(){e=g("span"),e.textContent="_",y(e,"class","pr-1.5")},m(n,s){A(n,e,s)},d(n){n&&T(e)}}}function Ve(t){let e;return{c(){e=g("span"),e.textContent="â–¡",y(e,"class","pr-1.5")},m(n,s){A(n,e,s)},d(n){n&&T(e)}}}function vt(t){let e;return{c(){e=g("span"),e.textContent="x",y(e,"class","text-gray-500")},m(n,s){A(n,e,s)},p:O,d(n){n&&T(e)}}}function yt(t){let e,n,s;return{c(){e=g("span"),e.textContent="x"},m(i,o){A(i,e,o),n||(s=Y(e,"mouseup",t[28]),n=!0)},p:O,d(i){i&&T(e),n=!1,s()}}}function Xe(t){let e;return{c(){e=g("div"),M(e,"height",t[13]+"px"),M(e,"width",t[4]+"px"),y(e,"class","absolute")},m(n,s){A(n,e,s)},p(n,s){s[0]&8192&&M(e,"height",n[13]+"px"),s[0]&16&&M(e,"width",n[4]+"px")},d(n){n&&T(e)}}}function kt(t){let e,n,s,i,o,r,l,f,u,E,_,k,c,a,S,z,V,P,C=t[7]!==void 0&&t[7].length!==0&&Ne(t);function q(d,W){return d[9]===d[0]?bt:_t}let N=q(t),m=N(t),v=t[10].minimize&&je(),b=t[10].maximize&&Ve();function j(d,W){return d[10].close?yt:vt}let D=j(t),B=D(t),x=t[3]&&Xe(t);var Z=t[0].component;function le(d){return{props:{window:d[0],process:d[0].process}}}return Z&&(c=Ie(Z,le(t))),{c(){e=g("div"),n=g("div"),s=g("div"),C&&C.c(),i=L(),m.c(),o=L(),r=g("div"),l=g("span"),v&&v.c(),f=L(),b&&b.c(),u=L(),B.c(),E=L(),_=g("div"),x&&x.c(),k=L(),c&&ke(c.$$.fragment),y(s,"class","flex items-center"),y(l,"class","pr-2.5 mb-1"),y(r,"class","flex items-center"),y(n,"class","h-7 flex justify-between title-bar text-sm rounded-t-md rounded-sm select-none svelte-jpt6my"),M(n,"width",t[4]-2+"px"),y(_,"style",a="height: "+t[0].height+"px;"+t[11]),y(_,"class",S=Me(t[12])+" svelte-jpt6my"),y(e,"class","absolute border rounded-t-md rounded-sm border-gray-800 drop-shadow-md"),M(e,"width",t[4]+"px"),M(e,"left",t[5]+"px"),M(e,"top",t[6]+"px"),M(e,"z-index",t[2])},m(d,W){A(d,e,W),p(e,n),p(n,s),C&&C.m(s,null),p(s,i),m.m(s,null),p(n,o),p(n,r),p(r,l),v&&v.m(l,null),p(l,f),b&&b.m(l,null),p(l,u),B.m(l,null),t[29](n),p(e,E),p(e,_),x&&x.m(_,null),p(_,k),c&&ae(c,_,null),z=!0,V||(P=[Y(n,"mousedown",t[25]),Y(n,"mouseup",t[26]),Y(n,"mousemove",t[27]),Y(e,"mousedown",t[23])],V=!0)},p(d,W){d[7]!==void 0&&d[7].length!==0?C?C.p(d,W):(C=Ne(d),C.c(),C.m(s,i)):C&&(C.d(1),C=null),N===(N=q(d))&&m?m.p(d,W):(m.d(1),m=N(d),m&&(m.c(),m.m(s,null))),d[10].minimize?v||(v=je(),v.c(),v.m(l,f)):v&&(v.d(1),v=null),d[10].maximize?b||(b=Ve(),b.c(),b.m(l,u)):b&&(b.d(1),b=null),D===(D=j(d))&&B?B.p(d,W):(B.d(1),B=D(d),B&&(B.c(),B.m(l,null))),(!z||W[0]&16)&&M(n,"width",d[4]-2+"px"),d[3]?x?x.p(d,W):(x=Xe(d),x.c(),x.m(_,k)):x&&(x.d(1),x=null);const H={};if(W[0]&1&&(H.window=d[0]),W[0]&1&&(H.process=d[0].process),Z!==(Z=d[0].component)){if(c){Qe();const we=c;oe(we.$$.fragment,1,0,()=>{de(we,1)}),et()}Z?(c=Ie(Z,le(d)),ke(c.$$.fragment),te(c.$$.fragment,1),ae(c,_,null)):c=null}else Z&&c.$set(H);(!z||W[0]&2049&&a!==(a="height: "+d[0].height+"px;"+d[11]))&&y(_,"style",a),(!z||W[0]&4096&&S!==(S=Me(d[12])+" svelte-jpt6my"))&&y(_,"class",S),(!z||W[0]&16)&&M(e,"width",d[4]+"px"),(!z||W[0]&32)&&M(e,"left",d[5]+"px"),(!z||W[0]&64)&&M(e,"top",d[6]+"px"),(!z||W[0]&4)&&M(e,"z-index",d[2])},i(d){z||(c&&te(c.$$.fragment,d),z=!0)},o(d){c&&oe(c.$$.fragment,d),z=!1},d(d){d&&T(e),C&&C.d(),m.d(),v&&v.d(),b&&b.d(),B.d(),t[29](null),x&&x.d(),c&&de(c),V=!1,ne(P)}}}function Ye(t){let e=0,n=0;if(t instanceof MouseEvent)e=t.pageX,n=t.pageY;else if(t instanceof TouchEvent){const s=t.touches[0];e=s.pageX,n=s.pageY}return[e,n]}function Et(t,e,n){let s,i,o,r,l,f,u,E,_,k,c,{window:a}=e,{classes:S,title:z,icon:V,x:P,y:C,width:q,height:N,style:m,controlButtons:v}=a.stores;$(t,S,h=>n(12,k=h)),$(t,z,h=>n(8,f=h)),$(t,V,h=>n(7,l=h)),$(t,P,h=>n(5,o=h)),$(t,C,h=>n(6,r=h)),$(t,q,h=>n(4,i=h)),$(t,N,h=>n(13,c=h)),$(t,m,h=>n(11,_=h)),$(t,v,h=>n(10,E=h));let b,j,D,B=!1,x;Ge(()=>{n(2,x=Pe())});function Z(){s||I.activeWindowStore.set(a)}let{activeWindowStore:le}=I;$(t,le,h=>n(9,u=h));function d(h){if(s||h instanceof MouseEvent&&h.button!==0)return;let[R,Ce]=Ye(h);const ge=document.body,Te=b.getBoundingClientRect();j=R-(Te.left+ge.scrollLeft-ge.clientLeft),D=Ce-(Te.top+ge.scrollTop-ge.clientTop),B=!0,x<=gt()&&n(2,x=Pe()),h instanceof MouseEvent&&h.preventDefault(),document.addEventListener("mousemove",G=>{H(G)}),document.addEventListener("mouseup",G=>{W(G)}),document.addEventListener("touchmove",G=>{H(G)},{passive:!1}),document.addEventListener("touchend",G=>{W(G)},{passive:!1})}function W(h){h instanceof MouseEvent&&h.button!==0||(B=!1,h instanceof MouseEvent&&h.preventDefault(),document.removeEventListener("mousemove",R=>{H(R)}),document.removeEventListener("mouseup",R=>{W(R)}),document.removeEventListener("touchmove",R=>{H(R)}),document.removeEventListener("touchend",R=>{W(R)}))}function H(h){if(s||!B)return;let[R,Ce]=Ye(h);n(0,a.x=R-(j??0),a),n(0,a.y=Ce-(D??0),a),h.preventDefault()}const we=()=>a.close();function nt(h){Se[h?"unshift":"push"](()=>{b=h,n(1,b)})}return t.$$set=h=>{"window"in h&&n(0,a=h.window)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(3,s=a.process.getImportantWindows().length!=0&&!a.important)},[a,b,x,s,i,o,r,l,f,u,E,_,k,c,S,z,V,P,C,q,N,m,v,Z,le,d,W,H,we,nt]}class Ct extends me{constructor(e){super(),he(this,e,Et,kt,re,{window:0},null,[-1,-1])}}function Ue(t,e,n){const s=t.slice();return s[3]=e[n],s}function $e(t,e){let n,s,i;return s=new Ct({props:{window:e[3]}}),{key:t,first:null,c(){n=Ke(),ke(s.$$.fragment),this.first=n},m(o,r){A(o,n,r),ae(s,o,r),i=!0},p(o,r){e=o;const l={};r&1&&(l.window=e[3]),s.$set(l)},i(o){i||(te(s.$$.fragment,o),i=!0)},o(o){oe(s.$$.fragment,o),i=!1},d(o){o&&T(n),de(s,o)}}}function Wt(t){let e=[],n=new Map,s,i,o=t[0];const r=l=>l[3];for(let l=0;l<o.length;l+=1){let f=Ue(t,o,l),u=r(f);n.set(u,e[l]=$e(u,f))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Ke()},m(l,f){for(let u=0;u<e.length;u+=1)e[u].m(l,f);A(l,s,f),i=!0},p(l,[f]){f&1&&(o=l[0],Qe(),e=dt(e,f,r,1,l,o,n,s.parentNode,at,$e,s,Ue),et())},i(l){if(!i){for(let f=0;f<o.length;f+=1)te(e[f]);i=!0}},o(l){for(let f=0;f<e.length;f+=1)oe(e[f]);i=!1},d(l){for(let f=0;f<e.length;f+=1)e[f].d(l);l&&T(s)}}}function St(t,e,n){let s,i,o=I.windowsStore;return $(t,o,r=>n(2,i=r)),t.$$.update=()=>{t.$$.dirty&4&&n(0,s=i)},[s,o,i]}class zt extends me{constructor(e){super(),he(this,e,St,Wt,re,{})}}function xt(t){let e,n,s,i,o;return n=new zt({}),{c(){e=g("div"),ke(n.$$.fragment),s=L(),i=g("main"),i.innerHTML='<p class="text-sky-400">It works again!</p>',y(e,"class","absolute")},m(r,l){A(r,e,l),ae(n,e,null),A(r,s,l),A(r,i,l),o=!0},p:O,i(r){o||(te(n.$$.fragment,r),o=!0)},o(r){oe(n.$$.fragment,r),o=!1},d(r){r&&T(e),de(n),r&&T(s),r&&T(i)}}}class Lt extends me{constructor(e){super(),he(this,e,null,xt,re,{})}}const ie=class{constructor(e,n){this.name=e,this.mainWindow=n}};let F=ie;w(F,"registeredApps",[]),w(F,"registerApp",e=>{ie.registeredApps.push(e)}),w(F,"getApp",e=>ie.registeredApps.find(n=>n.name==e)),w(F,"getAllApps",()=>[...ie.registeredApps]),w(F,"getAppByType",e=>{let n=ie.registeredApps.find(s=>s instanceof e);if(n==null)throw new Error("Invalid app specified. Is it registered?");return n});let qe=0;function Tt(){return qe++,qe-1}function Re(t){let e,n,s;return{c(){e=g("button"),e.textContent="Continue"},m(i,o){A(i,e,o),n||(s=Y(e,"mousedown",t[3]),n=!0)},p:O,d(i){i&&T(e),n=!1,s()}}}function At(t){let e,n,s,i,o=t[0].message+"",r,l,f,u,E,_,k,c=!t[0].unrecoverable&&Re(t);return{c(){e=g("div"),n=g("div"),s=g("div"),i=g("span"),r=pe(o),l=L(),f=g("div"),c&&c.c(),u=L(),E=g("button"),E.textContent="End Process",y(i,"class","text-center error-message whitespace-pre-line select-text svelte-wbgunv"),y(i,"style",""),y(s,"class","flex justify-center"),y(n,"class","h-20 error-message overflow-y-scroll scrollbar-hide svelte-wbgunv"),M(n,"width",t[1]+"px"),y(e,"class","bg-red-800 border-b border-b-red-700 pt-3 drop-shadow-xl"),y(f,"class","flex justify-around pt-5")},m(a,S){A(a,e,S),p(e,n),p(n,s),p(s,i),p(i,r),A(a,l,S),A(a,f,S),c&&c.m(f,null),p(f,u),p(f,E),_||(k=Y(E,"mousedown",t[4]),_=!0)},p(a,[S]){S&1&&o!==(o=a[0].message+"")&&Le(r,o),S&2&&M(n,"width",a[1]+"px"),a[0].unrecoverable?c&&(c.d(1),c=null):c?c.p(a,S):(c=Re(a),c.c(),c.m(f,u))},i:O,o:O,d(a){a&&T(e),a&&T(l),a&&T(f),c&&c.d(),_=!1,k()}}}function Bt(t,e,n){let s,{process:i}=e,{window:o}=e,{width:r}=o.stores;$(t,r,u=>n(1,s=u)),o.classes="bg-red-900",o.title=o.errorTitle,o.important=!0,o.controlButtons={maximize:!1,minimize:!1,close:!1},I.activeWindow=o;const l=()=>{o.close(),I.activeWindow=i.mainWindow},f=()=>{i.kill()};return t.$$set=u=>{"process"in u&&n(5,i=u.process),"window"in u&&n(0,o=u.window)},[o,s,r,l,f,i]}class Mt extends me{constructor(e){super(),he(this,e,Bt,At,re,{process:5,window:0})}}class De extends I{constructor(e,n,s=!1){super(500,500,400,160,Mt),this.errorTitle=e,this.message=n,this.unrecoverable=s}}const Q=class{constructor(e,n,s){w(this,"id");w(this,"app");w(this,"mainWindow");w(this,"options");w(this,"spawnWindow",e=>I.spawn(e,this));w(this,"kill",()=>{for(const e of this.getWindows())e.close();Q.processes=Q.processes.filter(e=>e!=this)});w(this,"crash",e=>{this.spawnWindow(new De("Fatal Error",`${this.app.name} has crashed:
${e}`,!0))});w(this,"error",e=>{this.spawnWindow(new De("Error",`An error has occurred in ${this.app.name}:
${e}


hi`,!1))});this.id=n,this.app=e,s!=null&&(this.options=s)}getWindows(){return I.getWindows().filter(e=>e.process==this)??[]}getImportantWindows(){return this.getWindows().filter(e=>e.important)??[]}static mergeOptions(e,n){return{...n,...e}}};let J=Q;w(J,"processes",[]),w(J,"getProcesses",()=>[...Q.processes]),w(J,"spawn",(e,n)=>{let s=F.getAppByType(e),i=Q.mergeOptions(n,e.defaultOptions),o=new Q(s,Tt(),i),r=new I(300,300,400,400,s.mainWindow);return o.mainWindow=I.spawn(r,o),o});function It(t){return t[Math.floor(Math.random()*t.length)]}const Ot="/assets/consoleIcon-9d1dc8de.svg";function Pt(t){let e,n,s,i,o,r,l,f,u,E,_,k,c,a,S,z,V,P,C,q,N,m,v,b,j,D;return{c(){e=g("div"),n=g("a"),n.textContent="Remove process",s=L(),i=g("br"),o=L(),r=g("a"),r.textContent="Update color",l=L(),f=g("br"),u=L(),E=g("a"),E.textContent="Update title",_=L(),k=g("br"),c=L(),a=g("a"),a.textContent="Spawn another",S=L(),z=g("br"),V=L(),P=g("a"),P.textContent="Show error",C=L(),q=g("br"),N=L(),m=g("a"),m.textContent="Show unrecoverable error",v=L(),b=g("br"),y(e,"class","pl-2 pt-2")},m(B,x){A(B,e,x),p(e,n),p(e,s),p(e,i),p(e,o),p(e,r),p(e,l),p(e,f),p(e,u),p(e,E),p(e,_),p(e,k),p(e,c),p(e,a),p(e,S),p(e,z),p(e,V),p(e,P),p(e,C),p(e,q),p(e,N),p(e,m),p(e,v),p(e,b),j||(D=[Y(n,"click",t[0]),Y(r,"click",t[2]),Y(E,"click",t[3]),Y(a,"click",t[1]),Y(P,"click",t[4]),Y(m,"click",t[5])],j=!0)},p:O,i:O,o:O,d(B){B&&T(e),j=!1,ne(D)}}}function Nt(t,e,n){let{process:s}=e,{window:i}=e,o=s.options;i.icon=Ot,i.style="background-color: "+o.backgroundColor;let r;Ge(()=>{r=0});function l(){s.kill(),console.log("Process killed!")}const f=()=>{let c=J.spawn(Ee);console.log("New process spawned!"),console.log(c)},u=()=>{let c=["bg-red","bg-blue","bg-lime","bg-black"];n(6,i.classes=It(c),i),console.log("Color updated!")},E=()=>{r+=1,n(6,i.title=r.toString(),i),console.log("Title updated!")},_=()=>{s.error("User has initiated an error.")},k=()=>{s.crash("User has forced a crash.")};return t.$$set=c=>{"process"in c&&n(7,s=c.process),"window"in c&&n(6,i=c.window)},[l,f,u,E,_,k,i,s]}class jt extends me{constructor(e){super(),he(this,e,Nt,Pt,re,{process:7,window:6})}}class Ee extends F{constructor(){super("Console",jt)}}w(Ee,"defaultOptions",{backgroundColor:"#000000"});new Lt({target:document.getElementById("app")});F.registerApp(new Ee);J.spawn(Ee,{backgroundColor:"#1a1d1e"});
