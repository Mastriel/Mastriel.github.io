var it=Object.defineProperty;var ot=(t,e,n)=>e in t?it(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h=(t,e,n)=>(ot(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function M(){}function Ze(t){return t()}function Be(){return Object.create(null)}function ne(t){t.forEach(Ze)}function He(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _e;function Me(t,e){return _e||(_e=document.createElement("a")),_e.href=e,t===_e.href}function rt(t){return Object.keys(t).length===0}function Ke(t,...e){if(t==null)return M;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function j(t){let e;return Ke(t,n=>e=n)(),e}function V(t,e,n){t.$$.on_destroy.push(Ke(e,n))}function Ie(t){return t??""}function b(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function A(t){t.parentNode&&t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function pe(t){return document.createTextNode(t)}function O(){return pe(" ")}function Ge(){return pe("")}function N(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lt(t){return Array.from(t.childNodes)}function Le(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function T(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Oe(t,e){return new t(e)}let fe;function ue(t){fe=t}function ct(){if(!fe)throw new Error("Function called outside component initialization");return fe}function Je(t){ct().$$.on_mount.push(t)}const ce=[],ze=[],ve=[],Pe=[],ut=Promise.resolve();let xe=!1;function ft(){xe||(xe=!0,ut.then(Qe))}function Ae(t){ve.push(t)}const We=new Set;let be=0;function Qe(){const t=fe;do{for(;be<ce.length;){const e=ce[be];be++,ue(e),at(e.$$)}for(ue(null),ce.length=0,be=0;ze.length;)ze.pop()();for(let e=0;e<ve.length;e+=1){const n=ve[e];We.has(n)||(We.add(n),n())}ve.length=0}while(ce.length);for(;Pe.length;)Pe.pop()();xe=!1,We.clear(),ue(t)}function at(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ae)}}const ye=new Set;let ee;function et(){ee={r:0,c:[],p:ee}}function tt(){ee.r||ne(ee.c),ee=ee.p}function te(t,e){t&&t.i&&(ye.delete(t),t.i(e))}function oe(t,e,n,s){if(t&&t.o){if(ye.has(t))return;ye.add(t),ee.c.push(()=>{ye.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function dt(t,e){oe(t,1,1,()=>{e.delete(t.key)})}function pt(t,e,n,s,i,o,r,l,f,u,E,w){let _=t.length,c=o.length,a=_;const C={};for(;a--;)C[t[a].key]=a;const S=[],U=new Map,D=new Map;for(a=c;a--;){const g=w(i,o,a),k=n(g);let y=r.get(k);y?s&&y.p(g,e):(y=u(k,g),y.c()),U.set(k,S[a]=y),k in C&&D.set(k,Math.abs(a-C[k]))}const x=new Set,H=new Set;function X(g){te(g,1),g.m(l,E),r.set(g.key,g),E=g.first,c--}for(;_&&c;){const g=S[c-1],k=t[_-1],y=g.key,q=k.key;g===k?(E=g.first,_--,c--):U.has(q)?!r.has(y)||x.has(y)?X(g):H.has(q)?_--:D.get(y)>D.get(q)?(H.add(y),X(g)):(x.add(q),_--):(f(k,r),_--)}for(;_--;){const g=t[_];U.has(g.key)||f(g,r)}for(;c;)X(S[c-1]);return S}function ke(t){t&&t.c()}function ae(t,e,n,s){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),s||Ae(()=>{const r=t.$$.on_mount.map(Ze).filter(He);t.$$.on_destroy?t.$$.on_destroy.push(...r):ne(r),t.$$.on_mount=[]}),o.forEach(Ae)}function de(t,e){const n=t.$$;n.fragment!==null&&(ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(t,e){t.$$.dirty[0]===-1&&(ce.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function he(t,e,n,s,i,o,r,l=[-1]){const f=fe;ue(t);const u=t.$$={fragment:null,ctx:[],props:o,update:M,not_equal:i,bound:Be(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Be(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};r&&r(u.root);let E=!1;if(u.ctx=n?n(t,e.props||{},(w,_,...c)=>{const a=c.length?c[0]:_;return u.ctx&&i(u.ctx[w],u.ctx[w]=a)&&(!u.skip_bound&&u.bound[w]&&u.bound[w](a),E&&ht(t,w)),_}):[],u.update(),E=!0,ne(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const w=lt(e.target);u.fragment&&u.fragment.l(w),w.forEach(A)}else u.fragment&&u.fragment.c();e.intro&&te(t.$$.fragment),ae(t,e.target,e.anchor,e.customElement),Qe()}ue(f)}class me{$destroy(){de(this,1),this.$destroy=M}$on(e,n){if(!He(n))return M;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!rt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const se=[];function P(t,e=M){let n;const s=new Set;function i(l){if(re(t,l)&&(t=l,n)){const f=!se.length;for(const u of s)u[1](),se.push(u,t);if(f){for(let u=0;u<se.length;u+=2)se[u][0](se[u+1]);se.length=0}}}function o(l){i(l(t))}function r(l,f=M){const u=[l,f];return s.add(u),s.size===1&&(n=e(i)||M),l(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:r}}function mt(){return{close:!0,minimize:!0,maximize:!1}}class wt{constructor(e,n,s,i){h(this,"stores");this.stores=new gt(e,n,s,i)}get x(){return j(this.stores.x)}set x(e){this.stores.x.set(e)}get y(){return j(this.stores.y)}set y(e){this.stores.y.set(e)}get width(){return j(this.stores.width)}set width(e){this.stores.width.set(e)}get height(){return j(this.stores.height)}set height(e){this.stores.height.set(e)}get title(){return j(this.stores.title)}set title(e){this.stores.title.set(e)}get classes(){return j(this.stores.classes)}set classes(e){this.stores.classes.set(e)}get style(){return j(this.stores.style)}set style(e){this.stores.style.set(e)}get resizable(){return j(this.stores.resizable)}set resizable(e){this.stores.resizable.set(e)}get important(){return j(this.stores.important)}set important(e){this.stores.important.set(e)}get icon(){return j(this.stores.icon)}set icon(e){this.stores.icon.set(e)}get controlButtons(){return j(this.stores.controlButtons)}set controlButtons(e){this.stores.controlButtons.set(e)}}class gt{constructor(e,n,s,i){h(this,"classes",P(""));h(this,"style",P(""));h(this,"title",P());h(this,"icon",P());h(this,"resizable",P(!1));h(this,"important",P(!1));h(this,"controlButtons",P(mt()));h(this,"height");h(this,"width");h(this,"y");h(this,"x");this.x=P(e),this.y=P(n),this.width=P(s),this.height=P(i)}}const Z=class extends wt{constructor(n,s,i,o,r){super(n,s,i,o);h(this,"_process");h(this,"_isVisible",!0);this.component=r}static get activeWindow(){return j(this.activeWindowStore)}static set activeWindow(n){this.activeWindowStore.set(n)}static getWindows(){return[...this.windows]}get process(){return this._process}get isAlive(){return this._process!=null}get isActive(){return Z.activeWindow==this}get isVisible(){return this._isVisible}set isVisible(n){this._isVisible=n}hide(){this.isVisible=!1}unhide(){this.isVisible=!0}close(){let n=Z.windows.filter(s=>s!=this);Z.windowsStore.set(n)}};let B=Z;h(B,"windowsStore",P([])),h(B,"windows"),h(B,"activeWindowStore",P(void 0)),h(B,"spawn",(n,s)=>(Z.windowsStore.set([...Z.windows,n]),n._process=s,n.title=n.process.app.name,n)),(()=>{Z.windowsStore.subscribe(n=>{Z.windows=n})})();let nt=0;const Se=()=>nt++,Ne=()=>nt;function je(t){let e,n,s;return{c(){e=v("img"),Me(e.src,n=t[7])||m(e,"src",n),m(e,"alt",s=t[8]+" icon"),m(e,"height",18),m(e,"width",18),m(e,"class","ml-1.5")},m(i,o){L(i,e,o)},p(i,o){o[0]&128&&!Me(e.src,n=i[7])&&m(e,"src",n),o[0]&256&&s!==(s=i[8]+" icon")&&m(e,"alt",s)},d(i){i&&A(e)}}}function _t(t){let e,n;return{c(){e=v("span"),n=pe(t[8]),m(e,"class","pl-2 text-gray-400")},m(s,i){L(s,e,i),b(e,n)},p(s,i){i[0]&256&&Le(n,s[8])},d(s){s&&A(e)}}}function bt(t){let e,n;return{c(){e=v("span"),n=pe(t[8]),m(e,"class","pl-2")},m(s,i){L(s,e,i),b(e,n)},p(s,i){i[0]&256&&Le(n,s[8])},d(s){s&&A(e)}}}function Ve(t){let e;return{c(){e=v("span"),e.textContent="_",m(e,"class","pr-1.5")},m(n,s){L(n,e,s)},d(n){n&&A(e)}}}function Xe(t){let e;return{c(){e=v("span"),e.textContent="â–¡",m(e,"class","pr-1.5")},m(n,s){L(n,e,s)},d(n){n&&A(e)}}}function vt(t){let e;return{c(){e=v("span"),e.textContent="x",m(e,"class","text-gray-500")},m(n,s){L(n,e,s)},p:M,d(n){n&&A(e)}}}function yt(t){let e,n,s;return{c(){e=v("span"),e.textContent="x"},m(i,o){L(i,e,o),n||(s=N(e,"mouseup",t[28]),n=!0)},p:M,d(i){i&&A(e),n=!1,s()}}}function Ye(t){let e;return{c(){e=v("div"),T(e,"height",t[13]+"px"),T(e,"width",t[4]+"px"),m(e,"class","absolute")},m(n,s){L(n,e,s)},p(n,s){s[0]&8192&&T(e,"height",n[13]+"px"),s[0]&16&&T(e,"width",n[4]+"px")},d(n){n&&A(e)}}}function kt(t){let e,n,s,i,o,r,l,f,u,E,w,_,c,a,C,S,U,D,x=t[7]!==void 0&&t[7].length!==0&&je(t);function H(d,W){return d[9]===d[0]?bt:_t}let X=H(t),g=X(t),k=t[10].minimize&&Ve(),y=t[10].maximize&&Xe();function q(d,W){return d[10].close?yt:vt}let K=q(t),I=K(t),z=t[3]&&Ye(t);var $=t[0].component;function le(d){return{props:{window:d[0],process:d[0].process}}}return $&&(c=Oe($,le(t))),{c(){e=v("div"),n=v("div"),s=v("div"),x&&x.c(),i=O(),g.c(),o=O(),r=v("div"),l=v("span"),k&&k.c(),f=O(),y&&y.c(),u=O(),I.c(),E=O(),w=v("div"),z&&z.c(),_=O(),c&&ke(c.$$.fragment),m(s,"class","flex items-center"),m(l,"class","pr-2.5 mb-1"),m(r,"class","flex items-center"),m(n,"class","h-7 flex justify-between title-bar text-sm rounded-t-md rounded-sm select-none svelte-jpt6my"),T(n,"width",t[4]-2+"px"),m(w,"style",a="height: "+t[0].height+"px;"+t[11]),m(w,"class",C=Ie(t[12])+" svelte-jpt6my"),m(e,"class","absolute border rounded-t-md rounded-sm border-gray-800 drop-shadow-md"),T(e,"width",t[4]+"px"),T(e,"left",t[5]+"px"),T(e,"top",t[6]+"px"),T(e,"z-index",t[2])},m(d,W){L(d,e,W),b(e,n),b(n,s),x&&x.m(s,null),b(s,i),g.m(s,null),b(n,o),b(n,r),b(r,l),k&&k.m(l,null),b(l,f),y&&y.m(l,null),b(l,u),I.m(l,null),t[29](n),b(e,E),b(e,w),z&&z.m(w,null),b(w,_),c&&ae(c,w,null),S=!0,U||(D=[N(n,"mousedown",t[25]),N(n,"mouseup",t[26]),N(n,"mousemove",t[27]),N(e,"mousedown",t[23])],U=!0)},p(d,W){d[7]!==void 0&&d[7].length!==0?x?x.p(d,W):(x=je(d),x.c(),x.m(s,i)):x&&(x.d(1),x=null),X===(X=H(d))&&g?g.p(d,W):(g.d(1),g=X(d),g&&(g.c(),g.m(s,null))),d[10].minimize?k||(k=Ve(),k.c(),k.m(l,f)):k&&(k.d(1),k=null),d[10].maximize?y||(y=Xe(),y.c(),y.m(l,u)):y&&(y.d(1),y=null),K===(K=q(d))&&I?I.p(d,W):(I.d(1),I=K(d),I&&(I.c(),I.m(l,null))),(!S||W[0]&16)&&T(n,"width",d[4]-2+"px"),d[3]?z?z.p(d,W):(z=Ye(d),z.c(),z.m(w,_)):z&&(z.d(1),z=null);const F={};if(W[0]&1&&(F.window=d[0]),W[0]&1&&(F.process=d[0].process),$!==($=d[0].component)){if(c){et();const we=c;oe(we.$$.fragment,1,0,()=>{de(we,1)}),tt()}$?(c=Oe($,le(d)),ke(c.$$.fragment),te(c.$$.fragment,1),ae(c,w,null)):c=null}else $&&c.$set(F);(!S||W[0]&2049&&a!==(a="height: "+d[0].height+"px;"+d[11]))&&m(w,"style",a),(!S||W[0]&4096&&C!==(C=Ie(d[12])+" svelte-jpt6my"))&&m(w,"class",C),(!S||W[0]&16)&&T(e,"width",d[4]+"px"),(!S||W[0]&32)&&T(e,"left",d[5]+"px"),(!S||W[0]&64)&&T(e,"top",d[6]+"px"),(!S||W[0]&4)&&T(e,"z-index",d[2])},i(d){S||(c&&te(c.$$.fragment,d),S=!0)},o(d){c&&oe(c.$$.fragment,d),S=!1},d(d){d&&A(e),x&&x.d(),g.d(),k&&k.d(),y&&y.d(),I.d(),t[29](null),z&&z.d(),c&&de(c),U=!1,ne(D)}}}function Ue(t){let e=0,n=0;if(t instanceof MouseEvent)e=t.pageX,n=t.pageY;else if(t instanceof TouchEvent){const s=t.touches[0];e=s.pageX,n=s.pageY}return[e,n]}function Et(t,e,n){let s,i,o,r,l,f,u,E,w,_,c,{window:a}=e,{classes:C,title:S,icon:U,x:D,y:x,width:H,height:X,style:g,controlButtons:k}=a.stores;V(t,C,p=>n(12,_=p)),V(t,S,p=>n(8,f=p)),V(t,U,p=>n(7,l=p)),V(t,D,p=>n(5,o=p)),V(t,x,p=>n(6,r=p)),V(t,H,p=>n(4,i=p)),V(t,X,p=>n(13,c=p)),V(t,g,p=>n(11,w=p)),V(t,k,p=>n(10,E=p));let y,q,K,I=!1,z;Je(()=>{n(2,z=Se())});function $(){s||(B.activeWindowStore.set(a),z<=Ne()&&n(2,z=Se()))}let{activeWindowStore:le}=B;V(t,le,p=>n(9,u=p));function d(p){if(s||p instanceof MouseEvent&&p.button!==0)return;let[Y,Ce]=Ue(p);const ge=document.body,Te=y.getBoundingClientRect();q=Y-(Te.left+ge.scrollLeft-ge.clientLeft),K=Ce-(Te.top+ge.scrollTop-ge.clientTop),I=!0,z<=Ne()&&n(2,z=Se()),p instanceof MouseEvent&&p.preventDefault(),document.addEventListener("mousemove",G=>{F(G)}),document.addEventListener("mouseup",G=>{W(G)}),document.addEventListener("touchmove",G=>{F(G)},{passive:!1}),document.addEventListener("touchend",G=>{W(G)},{passive:!1})}function W(p){p instanceof MouseEvent&&p.button!==0||(I=!1,p instanceof MouseEvent&&p.preventDefault(),document.removeEventListener("mousemove",Y=>{F(Y)}),document.removeEventListener("mouseup",Y=>{W(Y)}),document.removeEventListener("touchmove",Y=>{F(Y)}),document.removeEventListener("touchend",Y=>{W(Y)}))}function F(p){if(s||!I)return;let[Y,Ce]=Ue(p);n(0,a.x=Y-(q??0),a),n(0,a.y=Ce-(K??0),a),p.preventDefault()}const we=()=>a.close();function st(p){ze[p?"unshift":"push"](()=>{y=p,n(1,y)})}return t.$$set=p=>{"window"in p&&n(0,a=p.window)},t.$$.update=()=>{t.$$.dirty[0]&1&&n(3,s=a.process.getImportantWindows().length!=0&&!a.important)},[a,y,z,s,i,o,r,l,f,u,E,w,_,c,C,S,U,D,x,H,X,g,k,$,le,d,W,F,we,st]}class Ct extends me{constructor(e){super(),he(this,e,Et,kt,re,{window:0},null,[-1,-1])}}function qe(t,e,n){const s=t.slice();return s[3]=e[n],s}function Re(t,e){let n,s,i;return s=new Ct({props:{window:e[3]}}),{key:t,first:null,c(){n=Ge(),ke(s.$$.fragment),this.first=n},m(o,r){L(o,n,r),ae(s,o,r),i=!0},p(o,r){e=o;const l={};r&1&&(l.window=e[3]),s.$set(l)},i(o){i||(te(s.$$.fragment,o),i=!0)},o(o){oe(s.$$.fragment,o),i=!1},d(o){o&&A(n),de(s,o)}}}function Wt(t){let e=[],n=new Map,s,i,o=t[0];const r=l=>l[3];for(let l=0;l<o.length;l+=1){let f=qe(t,o,l),u=r(f);n.set(u,e[l]=Re(u,f))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Ge()},m(l,f){for(let u=0;u<e.length;u+=1)e[u].m(l,f);L(l,s,f),i=!0},p(l,[f]){f&1&&(o=l[0],et(),e=pt(e,f,r,1,l,o,n,s.parentNode,dt,Re,s,qe),tt())},i(l){if(!i){for(let f=0;f<o.length;f+=1)te(e[f]);i=!0}},o(l){for(let f=0;f<e.length;f+=1)oe(e[f]);i=!1},d(l){for(let f=0;f<e.length;f+=1)e[f].d(l);l&&A(s)}}}function St(t,e,n){let s,i,o=B.windowsStore;return V(t,o,r=>n(2,i=r)),t.$$.update=()=>{t.$$.dirty&4&&n(0,s=i)},[s,o,i]}class zt extends me{constructor(e){super(),he(this,e,St,Wt,re,{})}}function xt(t){let e,n,s,i,o;return n=new zt({}),{c(){e=v("div"),ke(n.$$.fragment),s=O(),i=v("main"),i.innerHTML='<p class="text-sky-400">It works again!</p>',m(e,"class","absolute")},m(r,l){L(r,e,l),ae(n,e,null),L(r,s,l),L(r,i,l),o=!0},p:M,i(r){o||(te(n.$$.fragment,r),o=!0)},o(r){oe(n.$$.fragment,r),o=!1},d(r){r&&A(e),de(n),r&&A(s),r&&A(i)}}}class At extends me{constructor(e){super(),he(this,e,null,xt,re,{})}}const ie=class{constructor(e,n){this.name=e,this.mainWindow=n}};let R=ie;h(R,"registeredApps",[]),h(R,"registerApp",e=>{ie.registeredApps.push(e)}),h(R,"getApp",e=>ie.registeredApps.find(n=>n.name==e)),h(R,"getAllApps",()=>[...ie.registeredApps]),h(R,"getAppByType",e=>{let n=ie.registeredApps.find(s=>s instanceof e);if(n==null)throw new Error("Invalid app specified. Is it registered?");return n});let De=0;function Lt(){return De++,De-1}function $e(t){let e,n,s;return{c(){e=v("button"),e.textContent="Continue"},m(i,o){L(i,e,o),n||(s=N(e,"mousedown",t[3]),n=!0)},p:M,d(i){i&&A(e),n=!1,s()}}}function Tt(t){let e,n,s,i,o=t[0].message+"",r,l,f,u,E,w,_,c=!t[0].unrecoverable&&$e(t);return{c(){e=v("div"),n=v("div"),s=v("div"),i=v("span"),r=pe(o),l=O(),f=v("div"),c&&c.c(),u=O(),E=v("button"),E.textContent="End Process",m(i,"class","text-center error-message whitespace-pre-line select-text svelte-wbgunv"),m(i,"style",""),m(s,"class","flex justify-center"),m(n,"class","h-20 error-message overflow-y-scroll scrollbar-hide svelte-wbgunv"),T(n,"width",t[1]+"px"),m(e,"class","bg-red-800 border-b border-b-red-700 pt-3 drop-shadow-xl"),m(f,"class","flex justify-around pt-5")},m(a,C){L(a,e,C),b(e,n),b(n,s),b(s,i),b(i,r),L(a,l,C),L(a,f,C),c&&c.m(f,null),b(f,u),b(f,E),w||(_=N(E,"mousedown",t[4]),w=!0)},p(a,[C]){C&1&&o!==(o=a[0].message+"")&&Le(r,o),C&2&&T(n,"width",a[1]+"px"),a[0].unrecoverable?c&&(c.d(1),c=null):c?c.p(a,C):(c=$e(a),c.c(),c.m(f,u))},i:M,o:M,d(a){a&&A(e),a&&A(l),a&&A(f),c&&c.d(),w=!1,_()}}}function Bt(t,e,n){let s,{process:i}=e,{window:o}=e,{width:r}=o.stores;V(t,r,u=>n(1,s=u)),o.classes="bg-red-900",o.title=o.errorTitle,o.important=!0,o.controlButtons={maximize:!1,minimize:!1,close:!1},B.activeWindow=o;const l=()=>{o.close(),B.activeWindow=i.mainWindow},f=()=>{i.kill()};return t.$$set=u=>{"process"in u&&n(5,i=u.process),"window"in u&&n(0,o=u.window)},[o,s,r,l,f,i]}class Mt extends me{constructor(e){super(),he(this,e,Bt,Tt,re,{process:5,window:0})}}class Fe extends B{constructor(e,n,s=!1){super(500,500,400,160,Mt),this.errorTitle=e,this.message=n,this.unrecoverable=s}}const Q=class{constructor(e,n,s){h(this,"id");h(this,"app");h(this,"mainWindow");h(this,"options");h(this,"spawnWindow",e=>B.spawn(e,this));h(this,"kill",()=>{for(const e of this.getWindows())e.close();Q.processes=Q.processes.filter(e=>e!=this)});h(this,"crash",e=>{this.spawnWindow(new Fe("Fatal Error",`${this.app.name} has crashed:
${e}`,!0))});h(this,"error",e=>{this.spawnWindow(new Fe("Error",`An error has occurred in ${this.app.name}:
${e}


hi`,!1))});this.id=n,this.app=e,s!=null&&(this.options=s)}getWindows(){return B.getWindows().filter(e=>e.process==this)??[]}getImportantWindows(){return this.getWindows().filter(e=>e.important)??[]}static mergeOptions(e,n){return{...n,...e}}};let J=Q;h(J,"processes",[]),h(J,"getProcesses",()=>[...Q.processes]),h(J,"spawn",(e,n)=>{let s=R.getAppByType(e),i=Q.mergeOptions(n,e.defaultOptions),o=new Q(s,Lt(),i),r=new B(300,300,400,400,s.mainWindow);return o.mainWindow=B.spawn(r,o),o});function It(t){return t[Math.floor(Math.random()*t.length)]}const Ot="/assets/consoleIcon-9d1dc8de.svg";function Pt(t){let e,n,s,i,o,r,l,f,u,E,w,_,c,a;return{c(){e=v("div"),n=v("span"),n.textContent="Remove process",s=O(),i=v("span"),i.textContent="Update color",o=O(),r=v("span"),r.textContent="Update title",l=O(),f=v("span"),f.textContent="Spawn another",u=O(),E=v("span"),E.textContent="Show error",w=O(),_=v("span"),_.textContent="Show unrecoverable error",m(n,"class","link svelte-18apmpb"),m(i,"class","link svelte-18apmpb"),m(r,"class","link svelte-18apmpb"),m(f,"class","link svelte-18apmpb"),m(E,"class","link svelte-18apmpb"),m(_,"class","link svelte-18apmpb"),m(e,"class","pt-2 pl-3 options svelte-18apmpb")},m(C,S){L(C,e,S),b(e,n),b(e,s),b(e,i),b(e,o),b(e,r),b(e,l),b(e,f),b(e,u),b(e,E),b(e,w),b(e,_),c||(a=[N(n,"click",t[0]),N(i,"click",t[2]),N(r,"click",t[3]),N(f,"click",t[1]),N(E,"click",t[4]),N(_,"click",t[5])],c=!0)},p:M,i:M,o:M,d(C){C&&A(e),c=!1,ne(a)}}}function Nt(t,e,n){let{process:s}=e,{window:i}=e,o=s.options;i.icon=Ot,i.style="background-color: "+o.backgroundColor;let r;Je(()=>{r=0});function l(){s.kill(),console.log("Process killed!")}const f=()=>{let c=J.spawn(Ee);console.log("New process spawned!"),console.log(c)},u=()=>{let c=["bg-red","bg-blue","bg-lime","bg-black"];n(6,i.classes=It(c),i),console.log("Color updated!")},E=()=>{r+=1,n(6,i.title=r.toString(),i),console.log("Title updated!")},w=()=>{s.error("User has initiated an error.")},_=()=>{s.crash("User has forced a crash.")};return t.$$set=c=>{"process"in c&&n(7,s=c.process),"window"in c&&n(6,i=c.window)},[l,f,u,E,w,_,i,s]}class jt extends me{constructor(e){super(),he(this,e,Nt,Pt,re,{process:7,window:6})}}class Ee extends R{constructor(){super("Console",jt)}}h(Ee,"defaultOptions",{backgroundColor:"#000000"});new At({target:document.getElementById("app")});R.registerApp(new Ee);J.spawn(Ee,{backgroundColor:"#1a1d1e"});
